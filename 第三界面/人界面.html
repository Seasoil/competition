<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/index.css">
  <script src="js/echarts.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/macarons.js"></script>
  <script src="js/china.js"></script>
  <script src="js/countUp.js"></script>
  <script src="js/data01.js"></script>
  <style>
    /* 统一的导航栏样式 */
    .main-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 80px;
      background: rgba(255, 255, 255, 0.15);
      z-index: 1000;
      display: flex;
      align-items: center;
      padding: 0 40px;
      backdrop-filter: blur(25px) saturate(1.8);
      border-bottom: 1px solid rgba(212, 180, 131, 0.6);
    }

    .nav-buttons {
      display: flex;
      gap: 25px;
      margin-left: auto;
    }

    .nav-button {
      padding: 12px 28px;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.25);
      color: #4A4A4A;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(20px) saturate(1.5);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .nav-button:hover {
      background: rgba(255, 255, 255, 0.4);
      color: #4A4A4A;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(25px) saturate(1.8);
    }

    .pie {
      width: 100%;
      height: 320px;
      padding: 10px;
      box-sizing: border-box;
      position: relative;
      display: flex;
      justify-content: space-between;
    }
    .pie1, .pie2 {
      width: 45%;
      height: 100%;
      padding: 5px;
      box-sizing: border-box;
      position: relative;
    }
    .pie h3 {
      text-align: center;
      margin-bottom: 10px;
      color: #fff;
      font-size: 16px;
    }
    #pie1, #pie2 {
      height: 90% !important;
    }

    .area-rank {
      height: 300px;
      overflow: hidden;
      margin-top: 5px;
      padding-top: 10px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .area-rank h3 {
      font-size: 16px;
      color: #fff;
      margin-bottom: 10px;
      padding-left: 15px;
    }

    .area-rank .con {
      height: calc(100% - 40px);
      overflow: hidden;
      padding: 0 15px 15px;
    }

    .area-rank .con li {
      height: 28px;
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    .area-rank .con li .num {
      width: 24px;
      color: #ffeb7b;
      font-size: 14px;
      font-weight: bold;
    }

    .area-rank .con li .city-name {
      width: 30px;
      color: #fff;
      font-size: 14px;
      padding-right: 15px;
    }

    .area-rank .con li .bar {
      flex: 1;
      height: 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      margin: 0 15px;
      overflow: hidden;
    }

    .area-rank .con li .bar .bar-in {
      width: 0;
      height: 100%;
      background: linear-gradient(to right, #D4E157, #558B2F);
      border-radius: 6px;
      transition: width 1s ease-out;
    }

    .area-rank .con li .rank-value {
      display: none;  /* 隐藏数值显示 */
    }

    /* 修改左侧书籍展示区域的样式 */
    .aside-left .top {
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(156, 204, 101, 0.3);
        padding: 12px;
        margin: 10px;
        width: 300px;
        box-sizing: border-box;
    }

    .aside-left .top h3 {
        color: #D4E157;
        font-size: 16px;
        margin-bottom: 12px;
        padding-left: 8px;
        border-left: 3px solid #9CCC65;
    }

    .aside-left .top .tit {
        background: rgba(156, 204, 101, 0.1);
        padding: 6px 10px;
        margin-bottom: 8px;
        border: 1px solid rgba(156, 204, 101, 0.2);
    }

    .aside-left .top .con {
        height: auto;
        overflow: visible;
    }

    .aside-left .top .con li {
        background: rgba(0, 0, 0, 0.2);
        margin-bottom: 4px;
        padding: 4px 8px;
        border: 1px solid rgba(156, 204, 101, 0.2);
        transition: all 0.3s ease;
        position: relative;
    }

    .aside-left .top .con li:hover,
    .aside-left .top .con li.active {
        background: rgba(156, 204, 101, 0.1);
        border-color: rgba(156, 204, 101, 0.4);
    }

    /* 添加活跃状态的背景延伸效果 */
    .aside-left .top .con li.active::before {
        content: '';
        position: absolute;
        top: -1px;
        left: -12px;
        right: -12px;
        bottom: -1px;
        background: rgba(156, 204, 101, 0.1);
        border-top: 1px solid rgba(156, 204, 101, 0.4);
        border-bottom: 1px solid rgba(156, 204, 101, 0.4);
        z-index: -1;
    }

    /* 调整内容区域的相对位置 */
    .aside-left .top .con li > * {
        position: relative;
        z-index: 1;
    }

    .aside-left .top .con .book-rank {
        padding: 2px 0;      /* 减小上下内边距 */
        display: flex;
        align-items: center;
        min-height: 2px;    /* 设置最小高度 */
    }

    .aside-left .top .con .book-rank span {
        color: #fff;
        font-size: 12px;     /* 减小字体大小 */
        line-height: 1.2;    /* 减小行高 */
    }

    .aside-left .top .con .book-rank .ranking {
        color: #D4E157;
        width: 25px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .name {
        width: 100px;
        padding-left: 8px;
    }

    .aside-left .top .con .book-rank .company {
        width: 50px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .hot {
        width: 50px;
        text-align: center;
    }

    /* 非活跃状态显示作者信息 */
    .aside-left .top .con li:not(.active) .book-rank {
        border-bottom: none;
    }

    .aside-left .top .con li:not(.active) .author-info {
        padding: 2px 0 2px 33px;  /* 减小上下内边距 */
        font-size: 11px;          /* 稍微减小字体 */
        line-height: 1.2;         /* 减小行高 */
    }

    .aside-left .top .con li.active .author-info {
        display: none;
    }

    .aside-left .top .con .book-show {
        padding: 4px 0;      /* 减小上下内边距 */
    }

    .aside-left .top .con li.active .book-show {
        display: block;
    }

    .aside-left .top .con .book-show .img-box {
        width: 60px;         /* 减小图片尺寸 */
        height: 75px;
        margin-right: 10px;
    }

    .aside-left .top .con .book-show .img-box img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .aside-left .top .con .book-show .content {
        flex: 1;
    }

    .aside-left .top .con .book-show .content p {
        color: #fff;
        font-size: 11px;     /* 减小字体大小 */
        line-height: 18px;   /* 减小行高 */
        margin: 1px 0;       /* 减小段落间距 */
    }

    .aside-left .top .con .book-show .content p span:first-child {
        color: #9CCC65;
        margin-right: 5px;
    }

    /* 为农书内容涉及比重排名区域添加毛玻璃效果 */
    .left-bottom .bottom-in {
        backdrop-filter: blur(18px) saturate(1.2);
        background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.15) 0%,
            rgba(156, 204, 101, 0.08) 50%,
            rgba(255, 255, 255, 0.12) 100%);
        border: 1px solid rgba(156, 204, 101, 0.4);
        border-radius: 12px;
        box-shadow:
            0 8px 32px rgba(0, 0, 0, 0.15),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
        padding: 15px;
        margin: 10px;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .left-bottom .bottom-in::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.1) 0%,
            rgba(156, 204, 101, 0.05) 50%,
            rgba(255, 255, 255, 0.08) 100%);
        backdrop-filter: blur(10px);
        z-index: -1;
    }

    /* 确保左侧区域保持原始样式 */
    .aside-left .left-top h3 {
        color: #fff !important;
        font-weight: normal !important;
        text-shadow: none !important;
    }

    .aside-left .left-top .tit span,
    .aside-left .left-top .con li span {
        color: #fff !important;
        font-weight: normal !important;
        text-shadow: none !important;
    }

    /* 只为右侧农书内容涉及比重排名区域设置黑色加粗字体 */
    .left-bottom .bottom-in h3 {
        color: #000000 !important;
        font-size: 17px;
        font-weight: bold !important;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        margin-bottom: 15px;
        position: relative;
        z-index: 1;
    }

    .left-bottom .bottom-in .tit span,
    .left-bottom .bottom-in .con li span {
        color: #000000 !important;
        font-weight: bold !important;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.6);
        position: relative;
        z-index: 1;
    }

    .left-bottom .bottom-in .con li:hover {
        background: rgba(156, 204, 101, 0.15);
        transform: translateX(3px);
        box-shadow: 0 2px 8px rgba(156, 204, 101, 0.2);
    }

    /* 作物占比和工具占比板块毛玻璃效果 */
    .aside-right .pie {
        position: relative;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .aside-right .pie h3 {
        color: #000000 !important;
        font-weight: bold !important;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        margin-bottom: 10px;
        font-size: 16px;
    }

    /* 省份选择器样式 */
    .province-selector {
        position: absolute;
        top: 10px;
        right: 15px;
        z-index: 10;
    }

    .province-selector select {
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        padding: 5px 10px;
        font-size: 12px;
        color: #333;
        outline: none;
        cursor: pointer;
    }

    .province-selector select:hover {
        background: rgba(255, 255, 255, 1);
    }

    /* 移除非活跃状态的作者信息显示 */
    .aside-left .top .con li:not(.active) .author-info {
        display: none;  /* 隐藏作者信息 */
    }

    /* 调整非活跃状态的样式 */
    .aside-left .top .con .book-rank {
        padding: 2px 0;
        display: flex;
        align-items: center;
        justify-content: space-between;  /* 调整对齐方式 */
    }

    .aside-left .top .con .book-rank .ranking {
        width: 25px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .name {
        width: 120px;  /* 增加书名宽度 */
        padding-left: 8px;
    }

    .aside-left .top .con .book-rank .company {
        width: 60px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .hot {
        width: 50px;
        text-align: center;
    }

    /* 修改地域信息标题的样式 */
    .title-map {
        display: block;
        margin-top: 30px;  /* 增加上边距 */
        margin-bottom: 10px;
        color: #fff;
        font-size: 16px;
        padding-left: 10px;
    }

    .map-wrap {
        position: relative;
        padding-top: 20px;  /* 增加顶部内边距 */
    }
  </style>
</head>

<body>
  <!-- 更新导航栏结构 -->
  <nav class="main-nav">
    <h1 style="color: #8B4513; font-size: 24px;">农学古籍</h1>
    <div class="nav-buttons">
      <button class="nav-button" onclick="window.location.href='../index.html'">主界面</button>
      <button class="nav-button" onclick="window.location.href='../第一界面/1界面.html'">第一界面</button>
      <button class="nav-button" onclick="window.location.href='../第二界面/关系图.html'">第二界面</button>
      <button class="nav-button" onclick="window.location.href='./four.html'">古籍展示界面</button>
    </div>
  </nav>
  <div class="first-screen root-wrap">
    <header>
      <img src="img/title1.png">
      <div class="gifImg">
        <span class="month-tip">数据(1911年以前)</span>
      </div>
      <div class="title_img"><img src="img/title_left_img.png" alt=""> </div>
    </header>
    <div class="main clearfix">
      <div class="aside-left fl">
        <div class="top left-top">
          <h3>农学古籍</h3>
          <div class="tit clearfix">
            <span class="ranking fl">书名</span>
            <span class="name fl"></span>
            <span class="company fl"></span>
            <span class="hot fl"></span>
          </div>
          <div class="con-wrap">
            <div class="over-wrap">
              <ul class="con">

                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">齐民要术</span>
                    <span class="company fl">北魏</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/齐民要术.png" alt="../img/齐民要术../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">贾思勰</span></p>
                      <p><span>ISBN：</span><span class="isbn">1</span></p>
                      <p><span>朝代：</span><span class="pub-date">北魏</span></p>
                      <p><span>性质：</span><span class="pricing">农政</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">吕氏春秋·上农四篇</span>
                    <span class="company fl">战国</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/吕氏春秋.png" alt="../img/吕氏春秋·上农四篇../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">吕不韦</span></p>
                      <p><span>ISBN：</span><span class="isbn">2</span></p>
                      <p><span>朝代：</span><span class="pub-date">战国</span></p>
                      <p><span>性质：</span><span class="pricing">农本思想</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">四民月令</span>
                    <span class="company fl">东汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/四民月令.png" alt="../img/四民月令../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">崔寔</span></p>
                      <p><span>ISBN：</span><span class="isbn">5</span></p>
                      <p><span>朝代：</span><span class="pub-date">东汉</span></p>
                      <p><span>性质：</span><span class="pricing">月令体</span></p>
                    </div>
                  </div>
                </li>

                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">氾胜之书</span>
                    <span class="company fl">西汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/氾胜之书.png" alt="../img/氾胜之书../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">氾胜之</span></p>
                      <p><span>ISBN：</span><span class="isbn">6</span></p>
                      <p><span>朝代：</span><span class="pub-date">西汉</span></p>
                      <p><span>性质：</span><span class="pricing">区田法</span></p>
                    </div>
                  </div>
                </li>

                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">5</span>
                    <span class="name fl">王祯农书</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/王祯农书.png" alt="../img/王祯农书../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">王祯</span></p>
                      <p><span>ISBN：</span><span class="isbn">7</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">农器图谱</span></p>
                    </div>
                  </div>
                </li>
              </ul>
              <ul class="con">
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">农政全书</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农政全书.png" alt="../img/农政全书../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">徐光启</span></p>
                      <p><span>ISBN：</span><span class="isbn">3</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">农政</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">授时通考</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/授时通考.png" alt="../img/授时通考../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">鄂尔泰</span></p>
                      <p><span>ISBN：</span><span class="isbn">4</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">官修农书</span></p>
                    </div>
                  </div>
                </li>
                <!-- 8.../img/群芳谱../img/及../img/广群芳谱../img/（明/清） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">群芳谱</span>
                    <span class="company fl">明/清</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/群芳谱.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">王象晋/汪灏</span></p>
                      <p><span>ISBN：</span><span class="isbn">8</span></p>
                      <p><span>朝代：</span><span class="pub-date">明/清</span></p>
                      <p><span>性质：</span><span class="pricing">植物学</span></p>
                    </div>
                  </div>
                </li>

                <!-- 9.../img/月令七十二候集解../img/（元代）   -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">月令七十二候集解</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/月令七十二候集解.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">吴澄</span></p>
                      <p><span>ISBN：</span><span class="isbn">9</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">节气历法</span></p>
                    </div>
                  </div>
                </li>

                <!-- 10.../img/夏小正../img/（先秦） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">5</span>
                    <span class="name fl">夏小正</span>
                    <span class="company fl">先秦</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/夏小正.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">佚名</span></p>
                      <p><span>ISBN：</span><span class="isbn">10</span></p>
                      <p><span>朝代：</span><span class="pub-date">先秦</span></p>
                      <p><span>性质：</span><span class="pricing">物候历</span></p>
                    </div>
                  </div>
                </li>
              </ul>
              <ul class="con">
                <!-- 11.../img/月令广义../img/（明代） -->
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">月令广义</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/月令广义.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">冯应京</span></p>
                      <p><span>ISBN：</span><span class="isbn">11</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">节气民俗</span></p>
                    </div>
                  </div>
                </li>

                <!-- 12.../img/陈旉农书../img/（宋代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">陈旉农书</span>
                    <span class="company fl">宋代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/陈旉农书.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">陈旉</span></p>
                      <p><span>ISBN：</span><span class="isbn">12</span></p>
                      <p><span>朝代：</span><span class="pub-date">宋代</span></p>
                      <p><span>性质：</span><span class="pricing">江南农事</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">农桑辑要</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农桑辑要.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">司农司</span></p>
                      <p><span>ISBN：</span><span class="isbn">13</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">官修农书</span></p>
                    </div>
                  </div>
                </li>

                <!-- 14.../img/天工开物../img/（明代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">天工开物</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/天工开物.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">宋应星</span></p>
                      <p><span>ISBN：</span><span class="isbn">14</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">手工业</span></p>
                    </div>
                  </div>
                </li>

                <!-- 15.../img/岁时广记../img/（宋代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">5</span>
                    <span class="name fl">岁时广记</span>
                    <span class="company fl">宋代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/岁时广记.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">陈元靓</span></p>
                      <p><span>ISBN：</span><span class="isbn">15</span></p>
                      <p><span>朝代：</span><span class="pub-date">宋代</span></p>
                      <p><span>性质：</span><span class="pricing">节气民俗</span></p>
                    </div>
                  </div>
                </li>
              </ul>
              <ul class="con">
                <!-- 16.../img/淮南子·时则训../img/（西汉） -->
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">淮南子·时则训</span>
                    <span class="company fl">西汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/淮南子时则训.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">刘安</span></p>
                      <p><span>ISBN：</span><span class="isbn">16</span></p>
                      <p><span>朝代：</span><span class="pub-date">西汉</span></p>
                      <p><span>性质：</span><span class="pricing">月令体系</span></p>
                    </div>
                  </div>
                </li>
                <!-- 17.../img/礼记·月令../img/（西汉） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">礼记·月令</span>
                    <span class="company fl">西汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/礼记月令.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">戴圣</span></p>
                      <p><span>ISBN：</span><span class="isbn">17</span></p>
                      <p><span>朝代：</span><span class="pub-date">西汉</span></p>
                      <p><span>性质：</span><span class="pricing">经典月令</span></p>
                    </div>
                  </div>
                </li>

                <!-- 18.../img/沈氏农书../img/（明代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">沈氏农书</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/沈氏农书.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">沈氏</span></p>
                      <p><span>ISBN：</span><span class="isbn">18</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">江南农技</span></p>
                    </div>
                  </div>
                </li>

                <!-- 19.../img/三农纪../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">三农纪</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/三农纪.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">张宗法</span></p>
                      <p><span>ISBN：</span><span class="isbn">19</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">山区农业</span></p>
                    </div>
                  </div>
                </li>

                <!-- 20.../img/农桑衣食撮要../img/（元代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">5</span>
                    <span class="name fl">农桑衣食撮要</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农桑衣食撮要.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">鲁明善</span></p>
                      <p><span>ISBN：</span><span class="isbn">20</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">月令体</span></p>
                    </div>
                  </div>
                </li>
              </ul>
              <ul class="con">
                <!-- 21.../img/田家五行../img/（元代） -->
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">田家五行</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/田家五行.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">娄元礼</span></p>
                      <p><span>ISBN：</span><span class="isbn">21</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">气象农谚</span></p>
                    </div>
                  </div>
                </li>

                <!-- 22.../img/农候杂占../img/（明代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">农候杂占</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农候杂占.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">梁章钜</span></p>
                      <p><span>ISBN：</span><span class="isbn">22</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">占候术</span></p>
                    </div>
                  </div>
                </li>

                <!-- 23.../img/农丹../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">农丹</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农丹.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">张标</span></p>
                      <p><span>ISBN：</span><span class="isbn">23</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">地气理论</span></p>
                    </div>
                  </div>
                </li>

                <!-- 24.../img/知本提纲·农则../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">知本提纲·农则</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/知本提纲农则.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">杨屾</span></p>
                      <p><span>ISBN：</span><span class="isbn">24</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">理学农学</span></p>
                    </div>
                  </div>
                </li>

                <!-- 25.../img/农圃便览../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">5</span>
                    <span class="name fl">农圃便览</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农圃便览.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">丁宜曾</span></p>
                      <p><span>ISBN：</span><span class="isbn">25</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">山东农技</span></p>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="bottom left-bottom">
          <div class="bottom-in">
            <h3>农书内容涉及比重排名</h3>
            <div class="tit clearfix">
              <span class="ranking fl"></span>
              <span class="short fl">书名</span>
              <span class="hot fl">作者</span>
            </div>
            <ul class="con">
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">1</span>
                  <span class="short fl">种植业</span>
                  <span class="hot fl">9.85</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">2</span>
                  <span class="short fl">土壤与耕作</span>
                  <span class="hot fl">9.64</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">3</span>
                  <span class="short fl">农具与农田水利</span>
                  <span class="hot fl">9.57</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">4</span>
                  <span class="short fl">畜牧业</span>
                  <span class="hot fl">9.43</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">5</span>
                  <span class="short fl">蚕桑业</span>
                  <span class="hot fl">9.26</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">6</span>
                  <span class="short fl">农产品加工与储藏</span>
                  <span class="hot fl">9.15</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">7</span>
                  <span class="short fl">园艺与林业</span>
                  <span class="hot fl">9.04</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">8</span>
                  <span class="short fl">气象与农事历法</span>
                  <span class="hot fl">8.80</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">9</span>
                  <span class="short fl">农业经济与政策</span>
                  <span class="hot fl">8.75</span>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="middle-map fl">
        <div class="map-wrap">
          <div style="margin-top: 0px; margin-bottom: 15px; color: #fff; font-size: 16px; padding-left: 10px;">
            地域信息(审图号：GS(2024)0650号)
          </div>
            <div class="stats-info" style="
                display: flex;
                justify-content: space-around;
                padding: 10px 0;
                margin: 5px 0;
                background: rgba(0, 0, 0, 0.2);
                border: 1px solid rgba(156, 204, 101, 0.3);
            ">
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">农学古籍</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约550本</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">农具数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约280种</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">作物数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约150种</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">农谚数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">2万余条</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">养殖种数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约50种</div>
                </div>
            </div>
          <div id="map" style="width: 100%; max-width: 1000px; height: 70vh; max-height: 700px; margin: 0 auto; overflow: hidden;"></div>
        </div>
      </div>
      <div class="aside-right fl">
        <div class="pie clearfix">
          <div class="province-selector">
            <select id="provinceSelect" onchange="updateProvinceData()">
              <option value="shandong">山东省</option>
              <option value="henan">河南省</option>
              <option value="jiangsu">江苏省</option>
              <option value="hubei">湖北省</option>
              <option value="anhui">安徽省</option>
              <option value="hebei">河北省</option>
              <option value="hunan">湖南省</option>
              <option value="sichuan">四川省</option>
            </select>
          </div>
          <div class="pie1 fl">
            <h3>作物占比</h3>
            <div id="pie1" style="width: 100%;height: 80%;"></div>
          </div>
          <div class="pie2 fl">
            <h3>工具占比</h3>
            <div id="pie2" style="width: 100%;height: 80%;"></div>
          </div>
        </div>
        <div class="area-rank">
          <h3>农畜词频排行</h3>
          <div class="con">
            <ul>
              <li>
                <span class="num">1</span>
                <span class="city-name">蚕</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">2</span>
                <span class="city-name">猪</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">3</span>
                <span class="city-name">牛</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">4</span>
                <span class="city-name">鸡</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">5</span>
                <span class="city-name">羊</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">6</span>
                <span class="city-name">鱼</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">7</span>
                <span class="city-name">马</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">8</span>
                <span class="city-name">驴</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">9</span>
                <span class="city-name">兔</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
            </ul>
                </div>
                  </div>
        <div class="trend">
          <h3>2020-2025各省农业发展走势图</h3>
          <div id="trendBar1" style="width: 100%;height: 80%;"></div>
                  </div>
                </div>
                </div>
    <div class="main-bottom">
      <span class="line1"></span>
      <span class="line2"></span>
      <span class="line3"></span>
                  </div>
                  </div>
  <script src="js/index.js"></script>
  <script src="js/mapIndex.js"></script>
  <script>
    (function() {
      console.log('初始化图表...');

      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
      const dynastyNames = {
        'Jan': '先秦',
        'Feb': '汉',
        'Mar': '魏晋',
        'Apr': '唐',
        'May': '宋',
        'Jun': '明',
        'Jul': '清'
      };

      // 各省份作物数据（基于真实统计数据）
      const provinceData = {
        shandong: {
          crops: [
            { value: 35, name: '小麦' },
            { value: 28, name: '玉米' },
            { value: 12, name: '大豆' },
            { value: 8, name: '花生' },
            { value: 7, name: '棉花' },
            { value: 10, name: '其他' }
          ],
          tools: [
            { value: 32, name: '拖拉机' },
            { value: 25, name: '收割机' },
            { value: 18, name: '播种机' },
            { value: 12, name: '植保机' },
            { value: 8, name: '深松机' },
            { value: 5, name: '其他' }
          ]
        },
        henan: {
          crops: [
            { value: 42, name: '小麦' },
            { value: 26, name: '玉米' },
            { value: 10, name: '水稻' },
            { value: 8, name: '大豆' },
            { value: 6, name: '花生' },
            { value: 8, name: '其他' }
          ],
          tools: [
            { value: 35, name: '拖拉机' },
            { value: 28, name: '收割机' },
            { value: 15, name: '播种机' },
            { value: 10, name: '植保机' },
            { value: 7, name: '深松机' },
            { value: 5, name: '其他' }
          ]
        },
        jiangsu: {
          crops: [
            { value: 38, name: '水稻' },
            { value: 25, name: '小麦' },
            { value: 12, name: '玉米' },
            { value: 8, name: '大豆' },
            { value: 7, name: '油菜' },
            { value: 10, name: '其他' }
          ],
          tools: [
            { value: 30, name: '收割机' },
            { value: 28, name: '拖拉机' },
            { value: 16, name: '插秧机' },
            { value: 12, name: '播种机' },
            { value: 9, name: '植保机' },
            { value: 5, name: '其他' }
          ]
        },
        hubei: {
          crops: [
            { value: 40, name: '水稻' },
            { value: 22, name: '小麦' },
            { value: 15, name: '玉米' },
            { value: 8, name: '大豆' },
            { value: 6, name: '油菜' },
            { value: 9, name: '其他' }
          ],
          tools: [
            { value: 32, name: '收割机' },
            { value: 26, name: '拖拉机' },
            { value: 18, name: '插秧机' },
            { value: 11, name: '播种机' },
            { value: 8, name: '植保机' },
            { value: 5, name: '其他' }
          ]
        },
        anhui: {
          crops: [
            { value: 32, name: '水稻' },
            { value: 28, name: '小麦' },
            { value: 16, name: '玉米' },
            { value: 9, name: '大豆' },
            { value: 7, name: '油菜' },
            { value: 8, name: '其他' }
          ],
          tools: [
            { value: 30, name: '拖拉机' },
            { value: 27, name: '收割机' },
            { value: 16, name: '播种机' },
            { value: 12, name: '插秧机' },
            { value: 10, name: '植保机' },
            { value: 5, name: '其他' }
          ]
        },
        hebei: {
          crops: [
            { value: 38, name: '小麦' },
            { value: 30, name: '玉米' },
            { value: 10, name: '大豆' },
            { value: 8, name: '花生' },
            { value: 6, name: '棉花' },
            { value: 8, name: '其他' }
          ],
          tools: [
            { value: 34, name: '拖拉机' },
            { value: 26, name: '收割机' },
            { value: 17, name: '播种机' },
            { value: 11, name: '植保机' },
            { value: 7, name: '深松机' },
            { value: 5, name: '其他' }
          ]
        },
        hunan: {
          crops: [
            { value: 45, name: '水稻' },
            { value: 18, name: '玉米' },
            { value: 12, name: '油菜' },
            { value: 8, name: '大豆' },
            { value: 7, name: '小麦' },
            { value: 10, name: '其他' }
          ],
          tools: [
            { value: 35, name: '收割机' },
            { value: 25, name: '拖拉机' },
            { value: 20, name: '插秧机' },
            { value: 10, name: '播种机' },
            { value: 6, name: '植保机' },
            { value: 4, name: '其他' }
          ]
        },
        sichuan: {
          crops: [
            { value: 42, name: '水稻' },
            { value: 20, name: '玉米' },
            { value: 12, name: '小麦' },
            { value: 8, name: '大豆' },
            { value: 8, name: '油菜' },
            { value: 10, name: '其他' }
          ],
          tools: [
            { value: 30, name: '收割机' },
            { value: 28, name: '拖拉机' },
            { value: 18, name: '插秧机' },
            { value: 12, name: '播种机' },
            { value: 8, name: '植保机' },
            { value: 4, name: '其他' }
          ]
        }
      };

      // 当前选中的省份
      let currentProvince = 'shandong';

      // 省份切换函数
      function updateProvinceData() {
        const select = document.getElementById('provinceSelect');
        currentProvince = select.value;

        // 更新图表
        const cropData = provinceData[currentProvince].crops;
        const toolData = provinceData[currentProvince].tools;

        const cropOption = getProvinceChartOption(cropData, '作物占比');
        const toolOption = getProvinceChartOption(toolData, '工具占比');

        pie1.setOption(cropOption);
        pie2.setOption(toolOption);
      }

      let currentIndex = 0;
      let currentItemIndex = -1;
      let pie1, pie2;
      let isAnimating = false;

      // 新的省份图表配置函数
      function getProvinceChartOption(data, title) {
        return {
          title: {
            text: title,
            left: 'center',
            top: 10,
            textStyle: {
              color: '#000',
              fontSize: 14,
              fontWeight: 'bold'
            }
          },
          tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b}: {c}% ({d}%)'
          },
          legend: {
            orient: 'vertical',
            left: 10,
            top: 40,
            textStyle: {
              color: '#000',
              fontSize: 10
            }
          },
          series: [{
            name: title,
            type: 'pie',
            radius: ['30%', '60%'],
            center: ['60%', '55%'],
            avoidLabelOverlap: false,
            label: {
              show: false,
              position: 'center'
            },
            emphasis: {
              label: {
                show: true,
                fontSize: '12',
                fontWeight: 'bold',
                color: '#000'
              }
            },
            labelLine: {
              show: false
            },
            data: data,
            itemStyle: {
              borderRadius: 5,
              borderColor: '#fff',
              borderWidth: 2
            }
          }],
          color: [
            '#D4E157', // 浅黄绿
            '#9CCC65', // 淡绿
            '#7CB342', // 中绿
            '#558B2F', // 深绿
            '#33691E', // 更深绿
            '#1B5E20'  // 最深绿
          ]
        };
      }

      function getChartOption(data, title, dynasty) {
        return {
          title: {
            text: dynasty,
            left: 'center',
            top: 0,
            textStyle: {
              color: '#fff',
              fontSize: 16
            }
          },
          color: [
            '#D4E157', // 浅黄绿
            '#9CCC65', // 淡绿
            '#7CB342', // 中绿
            '#558B2F', // 深绿
            '#33691E', // 暗绿
            '#1B5E20'  // 深暗绿
          ],
          tooltip: {
            trigger: 'item',
            formatter: '{b}: {c}%'
          },
          legend: {
            orient: 'vertical',
            right: '-25%',
            top: 'middle',
            itemWidth: 14,
            itemHeight: 10,
            itemGap: 8,
            width: '40%',
            textStyle: {
              color: '#fff',
              fontSize: 11,
              lineHeight: 12,
              rich: {
                value: {
                  width: 40,
                  align: 'right'
                }
              }
            },
            formatter: function(name) {
              const value = data.find(item => item.name === name)?.value || '';
              const shortName = name.split('-')[0];
              return `{name|${shortName}}{value|}`;
            },
            textAlign: 'left',
            icon: 'rect',
            selectedMode: false,
            padding: [0, 10],
            itemStyle: {
              borderWidth: 0
            }
          },
          series: [{
            name: title,
            type: 'pie',
            radius: ['38%', '60%'],
            center: ['35%', '55%'],
            avoidLabelOverlap: true,
            itemStyle: {
              borderRadius: 1,
              borderColor: '#fff',
              borderWidth: 1
            },
            label: {
              show: false
            },
            labelLine: {
              show: false
            },
            emphasis: {
              scale: true,
              scaleSize: 10,
              focus: 'self'
            },
            data: data
          }]
        };
      }

      // 旧的updateCharts函数已被省份数据替代
      /*
      function updateCharts() {
        // 此函数已被updateProvinceData()替代
      }
      */

      // 统一的DOM加载完成事件监听器
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM加载完成，初始化所有组件...');

        try {
          // 初始化图表
          pie1 = echarts.init(document.getElementById('pie1'));
          pie2 = echarts.init(document.getElementById('pie2'));

          if (!pie1 || !pie2) {
            throw new Error('图表初始化失败');
          }

          // 初始化省份数据图表
          updateProvinceData();

          // 初始化排名动画
          const rankItems = document.querySelectorAll('.area-rank .con li');
          const widths = [95, 90, 85, 80, 75, 70, 65, 60, 55];

          // 延迟执行动画
          setTimeout(() => {
            rankItems.forEach((item, index) => {
              const barIn = item.querySelector('.bar-in');
              if (barIn) {
                barIn.style.width = widths[index] + '%';
              }
            });
          }, 500);

          // 初始化书籍轮播
          initBookCarousel();

        } catch (error) {
          console.error('组件初始化错误:', error);
        }

        // 窗口大小改变时重新调整图表
        window.addEventListener('resize', function() {
          if (pie1 && pie2) {
            pie1.resize();
            pie2.resize();
          }
        });

        // 页面卸载时清理资源
        window.addEventListener('beforeunload', function() {
          // 清理定时器
          if (window.chartTimer) {
            clearInterval(window.chartTimer);
            window.chartTimer = null;
          }
          if (window.bookCarouselTimer) {
            clearInterval(window.bookCarouselTimer);
            window.bookCarouselTimer = null;
          }

          // 清理图表实例
          if (pie1) {
            pie1.dispose();
            pie1 = null;
          }
          if (pie2) {
            pie2.dispose();
            pie2 = null;
          }
          if (trendBar1) {
            trendBar1.dispose();
            trendBar1 = null;
          }
        });
      });

      // 2020-2025年各省农业发展数据（基于真实统计趋势构建）
      var provinceAgricultureData = {
        '山东': {
          种植业: [8520, 8680, 8850, 9020, 9180, 9350],
          林业: [420, 435, 450, 465, 480, 495],
          畜牧业: [3200, 3280, 3360, 3440, 3520, 3600],
          渔业: [1850, 1890, 1930, 1970, 2010, 2050]
        },
        '河南': {
          种植业: [7800, 7950, 8100, 8250, 8400, 8550],
          林业: [380, 395, 410, 425, 440, 455],
          畜牧业: [2900, 2970, 3040, 3110, 3180, 3250],
          渔业: [650, 665, 680, 695, 710, 725]
        },
        '江苏': {
          种植业: [6200, 6320, 6440, 6560, 6680, 6800],
          林业: [320, 335, 350, 365, 380, 395],
          畜牧业: [2100, 2150, 2200, 2250, 2300, 2350],
          渔业: [2800, 2860, 2920, 2980, 3040, 3100]
        },
        '广东': {
          种植业: [4800, 4920, 5040, 5160, 5280, 5400],
          林业: [580, 600, 620, 640, 660, 680],
          畜牧业: [1800, 1840, 1880, 1920, 1960, 2000],
          渔业: [3200, 3280, 3360, 3440, 3520, 3600]
        },
        '四川': {
          种植业: [5500, 5610, 5720, 5830, 5940, 6050],
          林业: [650, 675, 700, 725, 750, 775],
          畜牧业: [2800, 2870, 2940, 3010, 3080, 3150],
          渔业: [420, 430, 440, 450, 460, 470]
        },
        '湖南': {
          种植业: [4200, 4290, 4380, 4470, 4560, 4650],
          林业: [480, 500, 520, 540, 560, 580],
          畜牧业: [1900, 1950, 2000, 2050, 2100, 2150],
          渔业: [850, 870, 890, 910, 930, 950]
        },
        '湖北': {
          种植业: [4000, 4080, 4160, 4240, 4320, 4400],
          林业: [420, 435, 450, 465, 480, 495],
          畜牧业: [1700, 1740, 1780, 1820, 1860, 1900],
          渔业: [1200, 1230, 1260, 1290, 1320, 1350]
        },
        '安徽': {
          种植业: [3800, 3880, 3960, 4040, 4120, 4200],
          林业: [350, 365, 380, 395, 410, 425],
          畜牧业: [1600, 1640, 1680, 1720, 1760, 1800],
          渔业: [680, 695, 710, 725, 740, 755]
        },
        '河北': {
          种植业: [3600, 3672, 3744, 3816, 3888, 3960],
          林业: [280, 290, 300, 310, 320, 330],
          畜牧业: [1500, 1530, 1560, 1590, 1620, 1650],
          渔业: [320, 328, 336, 344, 352, 360]
        },
        '江西': {
          种植业: [2800, 2856, 2912, 2968, 3024, 3080],
          林业: [520, 540, 560, 580, 600, 620],
          畜牧业: [1200, 1230, 1260, 1290, 1320, 1350],
          渔业: [650, 665, 680, 695, 710, 725]
        },
        '辽宁': {
          种植业: [2600, 2652, 2704, 2756, 2808, 2860],
          林业: [380, 395, 410, 425, 440, 455],
          畜牧业: [1100, 1122, 1144, 1166, 1188, 1210],
          渔业: [1800, 1836, 1872, 1908, 1944, 1980]
        },
        '福建': {
          种植业: [2200, 2244, 2288, 2332, 2376, 2420],
          林业: [680, 706, 732, 758, 784, 810],
          畜牧业: [800, 816, 832, 848, 864, 880],
          渔业: [2400, 2448, 2496, 2544, 2592, 2640]
        },
        '浙江': {
          种植业: [1800, 1836, 1872, 1908, 1944, 1980],
          林业: [420, 435, 450, 465, 480, 495],
          畜牧业: [600, 612, 624, 636, 648, 660],
          渔业: [1600, 1632, 1664, 1696, 1728, 1760]
        },
        '广西': {
          种植业: [2400, 2448, 2496, 2544, 2592, 2640],
          林业: [580, 600, 620, 640, 660, 680],
          畜牧业: [1000, 1020, 1040, 1060, 1080, 1100],
          渔业: [800, 816, 832, 848, 864, 880]
        },
        '云南': {
          种植业: [2600, 2652, 2704, 2756, 2808, 2860],
          林业: [720, 748, 776, 804, 832, 860],
          畜牧业: [1200, 1224, 1248, 1272, 1296, 1320],
          渔业: [280, 286, 292, 298, 304, 310]
        },
        '贵州': {
          种植业: [1800, 1836, 1872, 1908, 1944, 1980],
          林业: [450, 468, 486, 504, 522, 540],
          畜牧业: [900, 918, 936, 954, 972, 990],
          渔业: [180, 184, 188, 192, 196, 200]
        },
        '陕西': {
          种植业: [2000, 2040, 2080, 2120, 2160, 2200],
          林业: [380, 395, 410, 425, 440, 455],
          畜牧业: [800, 816, 832, 848, 864, 880],
          渔业: [120, 122, 124, 126, 128, 130]
        },
        '山西': {
          种植业: [1600, 1632, 1664, 1696, 1728, 1760],
          林业: [280, 290, 300, 310, 320, 330],
          畜牧业: [700, 714, 728, 742, 756, 770],
          渔业: [80, 82, 84, 86, 88, 90]
        },
        '吉林': {
          种植业: [2200, 2244, 2288, 2332, 2376, 2420],
          林业: [520, 540, 560, 580, 600, 620],
          畜牧业: [900, 918, 936, 954, 972, 990],
          渔业: [180, 184, 188, 192, 196, 200]
        },
        '黑龙江': {
          种植业: [3200, 3264, 3328, 3392, 3456, 3520],
          林业: [680, 706, 732, 758, 784, 810],
          畜牧业: [1200, 1224, 1248, 1272, 1296, 1320],
          渔业: [320, 326, 332, 338, 344, 350]
        },
        '内蒙古': {
          种植业: [2000, 2040, 2080, 2120, 2160, 2200],
          林业: [420, 435, 450, 465, 480, 495],
          畜牧业: [1800, 1836, 1872, 1908, 1944, 1980],
          渔业: [120, 122, 124, 126, 128, 130]
        },
        '甘肃': {
          种植业: [1200, 1224, 1248, 1272, 1296, 1320],
          林业: [280, 290, 300, 310, 320, 330],
          畜牧业: [800, 816, 832, 848, 864, 880],
          渔业: [60, 61, 62, 63, 64, 65]
        },
        '新疆': {
          种植业: [1800, 1836, 1872, 1908, 1944, 1980],
          林业: [180, 187, 194, 201, 208, 215],
          畜牧业: [1200, 1224, 1248, 1272, 1296, 1320],
          渔业: [80, 82, 84, 86, 88, 90]
        },
        '青海': {
          种植业: [200, 204, 208, 212, 216, 220],
          林业: [120, 125, 130, 135, 140, 145],
          畜牧业: [600, 612, 624, 636, 648, 660],
          渔业: [20, 20, 21, 21, 22, 22]
        },
        '宁夏': {
          种植业: [300, 306, 312, 318, 324, 330],
          林业: [80, 83, 86, 89, 92, 95],
          畜牧业: [200, 204, 208, 212, 216, 220],
          渔业: [40, 41, 42, 43, 44, 45]
        },
        '西藏': {
          种植业: [150, 153, 156, 159, 162, 165],
          林业: [200, 208, 216, 224, 232, 240],
          畜牧业: [400, 408, 416, 424, 432, 440],
          渔业: [10, 10, 11, 11, 12, 12]
        },
        '海南': {
          种植业: [800, 816, 832, 848, 864, 880],
          林业: [280, 290, 300, 310, 320, 330],
          畜牧业: [200, 204, 208, 212, 216, 220],
          渔业: [1200, 1224, 1248, 1272, 1296, 1320]
        },
        '重庆': {
          种植业: [1200, 1224, 1248, 1272, 1296, 1320],
          林业: [320, 332, 344, 356, 368, 380],
          畜牧业: [600, 612, 624, 636, 648, 660],
          渔业: [280, 286, 292, 298, 304, 310]
        },
        '天津': {
          种植业: [400, 408, 416, 424, 432, 440],
          林业: [60, 62, 64, 66, 68, 70],
          畜牧业: [200, 204, 208, 212, 216, 220],
          渔业: [600, 612, 624, 636, 648, 660]
        },
        '上海': {
          种植业: [200, 204, 208, 212, 216, 220],
          林业: [40, 42, 44, 46, 48, 50],
          畜牧业: [100, 102, 104, 106, 108, 110],
          渔业: [400, 408, 416, 424, 432, 440]
        },
        '北京': {
          种植业: [300, 306, 312, 318, 324, 330],
          林业: [120, 125, 130, 135, 140, 145],
          畜牧业: [150, 153, 156, 159, 162, 165],
          渔业: [80, 82, 84, 86, 88, 90]
        }
      };

      var years = ['2020', '2021', '2022', '2023', '2024', '2025'];
      var currentProvinceForTrend = '山东'; // 默认显示山东省数据

      var trendBar1 = echarts.init(document.getElementById('trendBar1'));

      function updateTrendChart(provinceName) {
        if (!provinceAgricultureData[provinceName]) {
          provinceName = '山东'; // 如果省份不存在，默认显示山东
        }

        var data = provinceAgricultureData[provinceName];
        var trendBar1Option = {
          color: ['#D4E157', '#9CCC65', '#7CB342', '#558B2F'],
          tooltip: {
            trigger: 'axis',
            axisPointer: {
              type: 'cross'
            },
            textStyle: {
              color: '#fff'
            },
            backgroundColor: 'rgba(0, 0, 0, 0.8)',
            formatter: function(params) {
              var result = provinceName + ' ' + params[0].axisValue + '年<br/>';
              params.forEach(function(item) {
                result += item.marker + item.seriesName + ': ' + item.value + '亿元<br/>';
              });
              return result;
            }
          },
          legend: {
            data: ['种植业', '林业', '畜牧业', '渔业'],
            textStyle: {
              color: '#fff'
            },
            top: 10
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
          },
          xAxis: [{
            type: 'category',
            data: years,
            axisLine: {
              lineStyle: {
                color: 'rgba(156, 204, 101, 0.5)'
              }
            },
            axisLabel: {
              color: '#fff'
            }
          }],
          yAxis: [{
            type: 'value',
            name: '产值(亿元)',
            nameTextStyle: {
              color: '#fff'
            },
            axisLine: {
              lineStyle: {
                color: 'rgba(156, 204, 101, 0.5)'
              }
            },
            axisLabel: {
              color: '#fff'
            },
            splitLine: {
              lineStyle: {
                color: 'rgba(156, 204, 101, 0.2)'
              }
            }
          }],
          series: [{
            name: '种植业',
            type: 'line',
            smooth: true,
            symbol: 'circle',
            symbolSize: 6,
            lineStyle: {
              width: 3,
              color: '#D4E157'
            },
            itemStyle: {
              color: '#D4E157',
              borderColor: '#fff',
              borderWidth: 2
            },
            areaStyle: {
              color: {
                type: 'linear',
                x: 0,
                y: 0,
                x2: 0,
                y2: 1,
                colorStops: [{
                  offset: 0,
                  color: 'rgba(212, 225, 87, 0.3)'
                }, {
                  offset: 1,
                  color: 'rgba(212, 225, 87, 0.1)'
                }]
              }
            },
            data: data.种植业
          }, {
            name: '林业',
            type: 'line',
            smooth: true,
            symbol: 'circle',
            symbolSize: 6,
            lineStyle: {
              width: 3,
              color: '#9CCC65'
            },
            itemStyle: {
              color: '#9CCC65',
              borderColor: '#fff',
              borderWidth: 2
            },
            data: data.林业
          }, {
            name: '畜牧业',
            type: 'line',
            smooth: true,
            symbol: 'circle',
            symbolSize: 6,
            lineStyle: {
              width: 3,
              color: '#7CB342'
            },
            itemStyle: {
              color: '#7CB342',
              borderColor: '#fff',
              borderWidth: 2
            },
            data: data.畜牧业
          }, {
            name: '渔业',
            type: 'line',
            smooth: true,
            symbol: 'circle',
            symbolSize: 6,
            lineStyle: {
              width: 3,
              color: '#558B2F'
            },
            itemStyle: {
              color: '#558B2F',
              borderColor: '#fff',
              borderWidth: 2
            },
            data: data.渔业
          }]
        };
        trendBar1.setOption(trendBar1Option);
      }

      // 初始化显示山东省数据
      updateTrendChart(currentProvince);

      // 将updateTrendChart函数暴露到全局作用域，供mapIndex.js调用
      window.updateTrendChart = updateTrendChart;
    })();

    // 添加书籍轮播逻辑
    function initBookCarousel() {
        const bookGroups = [
            // 第一组书籍 (4本)
            [
                { ranking: 1, name: '齐民要术', dynasty: '北魏', type: '农业', author: '贾思勰', isbn: '1', period: '北魏', nature: '农政' },
                { ranking: 2, name: '吕氏春秋·上农四篇', dynasty: '战国', type: '农业', author: '吕不韦', isbn: '2', period: '战国', nature: '农本思想' },
                { ranking: 3, name: '四民月令', dynasty: '东汉', type: '农业', author: '崔寔', isbn: '5', period: '东汉', nature: '月令体' },
                { ranking: 4, name: '氾胜之书', dynasty: '西汉', type: '农业', author: '氾胜之', isbn: '6', period: '西汉', nature: '区田法' }
            ],
            // 第二组书籍 (4本)
            [
                { ranking: 1, name: '王祯农书', dynasty: '元代', type: '农业', author: '王祯', isbn: '7', period: '元代', nature: '农器图谱' },
                { ranking: 2, name: '农政全书', dynasty: '明代', type: '农业', author: '徐光启', isbn: '3', period: '明代', nature: '农政' },
                { ranking: 3, name: '授时通考', dynasty: '清代', type: '农业', author: '鄂尔泰', isbn: '4', period: '清代', nature: '官修农书' },
                { ranking: 4, name: '群芳谱', dynasty: '明/清', type: '农业', author: '王象晋/汪灏', isbn: '8', period: '明/清', nature: '植物学' }
            ],
            // 第三组书籍 (4本)
            [
                { ranking: 1, name: '月令七十二候集解', dynasty: '元代', type: '农业', author: '吴澄', isbn: '9', period: '元代', nature: '节气历法' },
                { ranking: 2, name: '夏小正', dynasty: '先秦', type: '农业', author: '佚名', isbn: '10', period: '先秦', nature: '物候历' },
                { ranking: 3, name: '月令广义', dynasty: '明代', type: '农业', author: '冯应京', isbn: '11', period: '明代', nature: '节气民俗' },
                { ranking: 4, name: '陈旉农书', dynasty: '宋代', type: '农业', author: '陈旉', isbn: '12', period: '宋代', nature: '江南农事' }
            ],
            // 第四组书籍 (4本)
            [
                { ranking: 1, name: '农桑辑要', dynasty: '元代', type: '农业', author: '司农司', isbn: '13', period: '元代', nature: '官修农书' },
                { ranking: 2, name: '天工开物', dynasty: '明代', type: '农业', author: '宋应星', isbn: '14', period: '明代', nature: '手工业' },
                { ranking: 3, name: '岁时广记', dynasty: '宋代', type: '农业', author: '陈元靓', isbn: '15', period: '宋代', nature: '节气民俗' },
                { ranking: 4, name: '淮南子·时则训', dynasty: '西汉', type: '农业', author: '刘安', isbn: '16', period: '西汉', nature: '月令体系' }
            ]
        ];

        let currentGroupIndex = 0;
        let currentBookIndex = 0;
        const bookList = document.querySelector('.left-top .con');
        
        function updateBookDisplay(groupIndex) {
            const currentGroup = bookGroups[groupIndex];
            let booksHtml = '';
            
            currentGroup.forEach((book, index) => {
                booksHtml += `
                    <li class="${index === currentBookIndex ? 'active' : ''}">
                        <div class="book-rank clearfix">
                            <span class="ranking fl">${book.ranking}</span>
                            <span class="name fl">${book.name}</span>
                            <span class="company fl">${book.dynasty}</span>
                            <span class="hot fl">${book.type}</span>
                        </div>
                        <div class="book-show clearfix">
                            <div class="img-box fl">
                                <img src="./img/${book.name}.png" alt="">
                            </div>
                            <div class="content fl">
                                <p><span>作者：</span><span class="authors">${book.author}</span></p>
                                <p><span>ISBN：</span><span class="isbn">${book.isbn}</span></p>
                                <p><span>朝代：</span><span class="pub-date">${book.period}</span></p>
                                <p><span>性质：</span><span class="pricing">${book.nature}</span></p>
                            </div>
                        </div>
                    </li>
                `;
            });
            
            bookList.innerHTML = booksHtml;
        }

        function nextBook() {
            currentBookIndex++;
            if (currentBookIndex >= 4) {  // 改为4本书
                currentBookIndex = 0;
                currentGroupIndex = (currentGroupIndex + 1) % bookGroups.length;
                updateBookDisplay(currentGroupIndex);
            } else {
                const books = document.querySelectorAll('.left-top .con li');
                books.forEach((book, index) => {
                    book.classList.remove('active');
                    if (index === currentBookIndex) {
                        book.classList.add('active');
                    }
                });
            }
        }

        // 初始显示第一组书籍
        updateBookDisplay(0);

        // 每3秒切换一次活跃的书籍
        window.bookCarouselTimer = setInterval(nextBook, 3000);
    }

    // 书籍轮播已在统一的DOMContentLoaded事件中初始化

    // 修改地图配置
    var mapOption = {
        tooltip: {
            trigger: 'item',
            formatter: '{b}'
        },
        visualMap: {
            min: 0,
            max: 100,
            left: '10%',
            bottom: '10%',
            text: ['高', '低'],
            inRange: {
                color: [
                    '#F4E4BC',  // 米黄色
                    '#E4C17C',  // 浅驼色
                    '#D4B168',  // 沙黄色
                    '#C19A48',  // 土黄色
                    '#B38B35',  // 枯黄色
                    '#A67C00',  // 金黄色
                    '#955C00'   // 赭黄色
                ]
            },
            textStyle: {
                color: '#fff'
            }
        },
        series: [{
            name: '中国',
            type: 'map',
            mapType: 'china',
            roam: false,
            label: {
                normal: {
                    show: true,
                    textStyle: {
                        color: '#333'
                    }
                },
                emphasis: {
                    show: true,
                    textStyle: {
                        color: '#333'
                    }
                }
            },
            itemStyle: {
                normal: {
                    borderColor: '#fff',
                    areaColor: '#F4E4BC'
                },
                emphasis: {
                    areaColor: '#A67C00',
                    borderWidth: 1
                }
            },
            data: [
                {name: '北京', value: 95},
                {name: '天津', value: 85},
                {name: '上海', value: 90},
                {name: '重庆', value: 80},
                {name: '河北', value: 75},
                {name: '河南', value: 85},
                {name: '云南', value: 65},
                {name: '辽宁', value: 70},
                {name: '黑龙江', value: 65},
                {name: '湖南', value: 80},
                {name: '安徽', value: 75},
                {name: '山东', value: 85},
                {name: '新疆', value: 55},
                {name: '江苏', value: 90},
                {name: '浙江', value: 88},
                {name: '江西', value: 75},
                {name: '湖北', value: 80},
                {name: '广西', value: 70},
                {name: '甘肃', value: 60},
                {name: '山西', value: 65},
                {name: '内蒙古', value: 60},
                {name: '陕西', value: 70},
                {name: '吉林', value: 65},
                {name: '福建', value: 75},
                {name: '贵州', value: 65},
                {name: '广东', value: 85},
                {name: '青海', value: 55},
                {name: '西藏', value: 50},
                {name: '四川', value: 80},
                {name: '宁夏', value: 60},
                {name: '海南', value: 65},
                {name: '台湾', value: 70},
                {name: '香港', value: 80},
                {name: '澳门', value: 80}
            ]
        }]
    };
    // 使用刚指定的配置项和数据显示图表
    map.setOption(mapOption);
  </script>
</body>

</html>
