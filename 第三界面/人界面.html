<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="js/echarts.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/macarons.js"></script>
  <script src="js/china.js"></script>
  <script src="js/countUp.js"></script>
  <script src="js/data01.js"></script>
  <style>
    /* 统一的导航栏样式 */
    .main-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 80px;
      background: rgba(255, 250, 240, 0.85);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: flex;
      align-items: center;
      padding: 0 40px;
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(212, 180, 131, 0.5);
    }

    .nav-buttons {
      display: flex;
      gap: 25px;
      margin-left: auto;
    }

    .nav-button {
      padding: 12px 28px;
      border-radius: 6px;
      background: transparent;
      color: #4A4A4A;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(74, 74, 74, 0.3);
      display: flex;
      align-items: center;
      gap: 8px;
      backdrop-filter: blur(8px);
      text-decoration: none;
    }

    .nav-button:hover {
      background: rgba(74, 74, 74, 0.1);
      color: #4A4A4A;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    }

    .nav-button i {
      font-size: 18px;
    }

    /* 确保导航栏在所有界面中样式一致 */
    .main-nav .nav-buttons {
      margin-left: auto;
    }

    .pie {
      width: 100%;
      height: 350px; /* 增加高度 */
      padding: 15px; /* 增加内边距 */
      box-sizing: border-box;
      position: relative;
      display: flex;
      justify-content: space-between;
      gap: 20px; /* 添加组件间距 */
    }
    .pie1, .pie2 {
      width: 48%; /* 稍微增加宽度 */
      height: 100%;
      padding: 10px; /* 增加内边距 */
      box-sizing: border-box;
      position: relative;
      background: rgba(0, 0, 0, 0.1); /* 添加轻微背景 */
      border-radius: 8px; /* 添加圆角 */
    }
    .pie h3 {
      text-align: center;
      margin-bottom: 15px; /* 增加底部间距 */
      color: #fff;
      font-size: 18px; /* 增大字体 */
      font-weight: 500; /* 增加字重 */
    }
    #pie1, #pie2 {
      height: 90% !important;
    }

    .area-rank {
      height: 320px; /* 增加高度 */
      overflow: hidden;
      margin-top: 15px; /* 增加顶部间距 */
      padding: 15px; /* 增加内边距 */
      background: rgba(0, 0, 0, 0.15); /* 稍微加深背景 */
      border-radius: 10px; /* 增大圆角 */
      border: 1px solid rgba(255, 255, 255, 0.1); /* 添加边框 */
    }

    .area-rank h3 {
      font-size: 18px; /* 增大字体 */
      color: #fff;
      margin-bottom: 15px; /* 增加底部间距 */
      padding-left: 0; /* 移除左边距，因为容器已有padding */
      font-weight: 500; /* 增加字重 */
    }

    .area-rank .con {
      height: calc(100% - 50px); /* 调整高度计算 */
      overflow: hidden;
      padding: 0; /* 移除内边距，因为容器已有padding */
    }

    .area-rank .con li {
      height: 32px; /* 增加行高 */
      display: flex;
      align-items: center;
      margin-bottom: 10px; /* 增加行间距 */
      padding: 0 5px; /* 添加左右内边距 */
      border-radius: 4px; /* 添加圆角 */
      transition: background-color 0.2s ease; /* 添加过渡效果 */
    }

    .area-rank .con li .num {
      width: 24px;
      color: #ffeb7b;
      font-size: 14px;
      font-weight: bold;
    }

    .area-rank .con li .city-name {
      width: 30px;
      color: #fff;
      font-size: 14px;
      padding-right: 15px;
    }

    .area-rank .con li .bar {
      flex: 1;
      height: 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      margin: 0 15px;
      overflow: hidden;
    }

    .area-rank .con li .bar .bar-in {
      width: 0;
      height: 100%;
      background: linear-gradient(to right, #D4E157, #558B2F);
      border-radius: 6px;
      transition: width 1s ease-out;
    }

    .area-rank .con li .rank-value {
      display: none;  /* 隐藏数值显示 */
    }

    /* 修改左侧书籍展示区域的样式 */
    .aside-left .top {
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(156, 204, 101, 0.3);
        padding: 18px; /* 增加内边距 */
        margin: 15px; /* 增加外边距 */
        width: 320px; /* 稍微增加宽度 */
        box-sizing: border-box;
        border-radius: 10px; /* 添加圆角 */
    }

    .aside-left .top h3 {
        color: #D4E157;
        font-size: 18px; /* 增大字体 */
        margin-bottom: 18px; /* 增加底部间距 */
        padding-left: 12px; /* 增加左边距 */
        border-left: 4px solid #9CCC65; /* 增加边框宽度 */
        font-weight: 500; /* 增加字重 */
    }

    .aside-left .top .tit {
        background: rgba(156, 204, 101, 0.1);
        padding: 6px 10px;
        margin-bottom: 8px;
        border: 1px solid rgba(156, 204, 101, 0.2);
    }

    .aside-left .top .con {
        height: auto;
        overflow: visible;
    }

    .aside-left .top .con li {
        background: rgba(0, 0, 0, 0.2);
        margin-bottom: 8px; /* 增加行间距 */
        padding: 8px 12px; /* 增加内边距 */
        border: 1px solid rgba(156, 204, 101, 0.2);
        transition: all 0.3s ease;
        position: relative;
        border-radius: 6px; /* 添加圆角 */
    }

    .aside-left .top .con li:hover,
    .aside-left .top .con li.active {
        background: rgba(156, 204, 101, 0.1);
        border-color: rgba(156, 204, 101, 0.4);
    }

    /* 添加活跃状态的背景延伸效果 */
    .aside-left .top .con li.active::before {
        content: '';
        position: absolute;
        top: -1px;
        left: -12px;
        right: -12px;
        bottom: -1px;
        background: rgba(156, 204, 101, 0.1);
        border-top: 1px solid rgba(156, 204, 101, 0.4);
        border-bottom: 1px solid rgba(156, 204, 101, 0.4);
        z-index: -1;
    }

    /* 调整内容区域的相对位置 */
    .aside-left .top .con li > * {
        position: relative;
        z-index: 1;
    }

    .aside-left .top .con .book-rank {
        padding: 6px 0; /* 增加上下内边距 */
        display: flex;
        align-items: center;
        min-height: 30px; /* 增加最小高度 */
    }

    .aside-left .top .con .book-rank span {
        color: #fff;
        font-size: 14px; /* 增大字体大小 */
        line-height: 1.4; /* 增加行高 */
    }

    .aside-left .top .con .book-rank .ranking {
        color: #D4E157;
        width: 25px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .name {
        width: 100px;
        padding-left: 8px;
    }

    .aside-left .top .con .book-rank .company {
        width: 50px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .hot {
        width: 50px;
        text-align: center;
    }

    /* 非活跃状态显示作者信息 */
    .aside-left .top .con li:not(.active) .book-rank {
        border-bottom: none;
    }

    .aside-left .top .con li:not(.active) .author-info {
        padding: 2px 0 2px 33px;  /* 减小上下内边距 */
        font-size: 11px;          /* 稍微减小字体 */
        line-height: 1.2;         /* 减小行高 */
    }

    .aside-left .top .con li.active .author-info {
        display: none;
    }

    .aside-left .top .con .book-show {
        padding: 4px 0;      /* 减小上下内边距 */
    }

    .aside-left .top .con li.active .book-show {
        display: block;
    }

    .aside-left .top .con .book-show .img-box {
        width: 60px;         /* 减小图片尺寸 */
        height: 75px;
        margin-right: 10px;
    }

    .aside-left .top .con .book-show .img-box img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .aside-left .top .con .book-show .content {
        flex: 1;
    }

    .aside-left .top .con .book-show .content p {
        color: #fff;
        font-size: 11px;     /* 减小字体大小 */
        line-height: 18px;   /* 减小行高 */
        margin: 1px 0;       /* 减小段落间距 */
    }

    .aside-left .top .con .book-show .content p span:first-child {
        color: #9CCC65;
        margin-right: 5px;
    }

    /* 移除非活跃状态的作者信息显示 */
    .aside-left .top .con li:not(.active) .author-info {
        display: none;  /* 隐藏作者信息 */
    }

    /* 调整非活跃状态的样式 */
    .aside-left .top .con .book-rank {
        padding: 2px 0;
        display: flex;
        align-items: center;
        justify-content: space-between;  /* 调整对齐方式 */
    }

    .aside-left .top .con .book-rank .ranking {
        width: 25px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .name {
        width: 120px;  /* 增加书名宽度 */
        padding-left: 8px;
    }

    .aside-left .top .con .book-rank .company {
        width: 60px;
        text-align: center;
    }

    .aside-left .top .con .book-rank .hot {
        width: 50px;
        text-align: center;
    }

    /* 修改地域信息标题的样式 */
    .title-map {
        display: block;
        margin-top: 30px;  /* 增加上边距 */
        margin-bottom: 10px;
        color: #fff;
        font-size: 16px;
        padding-left: 10px;
    }

    .map-wrap {
        position: relative;
        padding-top: 20px;  /* 增加顶部内边距 */
    }

    /* 地图交互动画效果 */
    @keyframes fadeInSlide {
        0% {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    @keyframes pulseGlow {
        0%, 100% {
            box-shadow: 0 0 5px rgba(30, 144, 255, 0.3);
        }
        50% {
            box-shadow: 0 0 20px rgba(30, 144, 255, 0.8);
        }
    }

    /* 省份tooltip样式增强 */
    .province-tooltip {
        animation: fadeInSlide 0.3s ease-out;
        transition: all 0.3s ease;
    }

    .province-tooltip-enhanced {
        animation: fadeInSlide 0.3s ease-out;
        transition: all 0.3s ease;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    }

    /* ECharts tooltip 增强样式 */
    .echarts-tooltip {
        transition: opacity 0.3s ease, transform 0.3s ease !important;
        border-radius: 8px !important;
        backdrop-filter: blur(10px) !important;
    }

    /* 地图省份悬停时的光晕效果 */
    .province-hover-glow {
        filter: drop-shadow(0 0 10px rgba(244, 71, 13, 0.6));
    }

    /* 地图省份选中时的光晕效果 */
    .province-selected-glow {
        filter: drop-shadow(0 0 15px rgba(30, 144, 255, 0.8));
    }

    /* 地图容器增强 */
    #map {
        transition: all 0.3s ease;
        cursor: pointer;
    }

    /* 地图悬停时的容器效果 */
    #map:hover {
        filter: brightness(1.05);
    }

    /* 为选中的省份添加特殊效果 */
    .province-selected {
        animation: pulseGlow 2s infinite;
    }

    /* 添加整体布局优化 */
    .main {
        gap: 20px; /* 为主要区域添加间距 */
    }

    .aside-left, .aside-right {
        padding: 10px; /* 为侧边栏添加内边距 */
    }

    .middle-map {
        padding: 0 10px; /* 为中间地图区域添加左右内边距 */
    }

    /* 为悬停效果添加轻微的交互反馈 */
    .area-rank .con li:hover {
        background-color: rgba(255, 255, 255, 0.05);
    }

    /* 响应式调整 */
    @media (max-width: 1200px) {
        .province-tooltip {
            min-width: 240px !important;
        }

        .province-tooltip span {
            font-size: 24px !important;
        }

        .province-tooltip div {
            font-size: 18px !important;
        }
    }

    @media (max-width: 768px) {
        .province-tooltip {
            min-width: 200px !important;
        }

        .province-tooltip span {
            font-size: 20px !important;
        }

        .province-tooltip div {
            font-size: 16px !important;
        }
    }
  </style>
</head>

<body>
  <!-- 统一导航栏 -->
  <nav class="main-nav">
    <div class="nav-buttons">
      <a href="../index.html" class="nav-button">
        <i class="fas fa-home"></i>
        主页
      </a>
      <a href="../第一界面/1界面.html" class="nav-button">
        <i class="fas fa-calendar-alt"></i>
        节气展示
      </a>
      <a href="../第二界面/关系图.html" class="nav-button">
        <i class="fas fa-project-diagram"></i>
        病害关系图
      </a>
      <a href="./four.html" class="nav-button">
        <i class="fas fa-book"></i>
        古籍展示
      </a>
    </div>
  </nav>
  <div class="first-screen root-wrap" style="padding-top: 90px;"> <!-- 为导航栏留出空间 -->
    <header>
      <img src="img/title1.png">
      <div class="gifImg">
        <span class="month-tip">数据(1911年以前)</span>
      </div>
      <div class="title_img"><img src="img/title_left_img.png" alt=""> </div>
    </header>
    <div class="main clearfix">
      <div class="aside-left fl">
        <div class="top left-top">
          <h3>农学古籍</h3>
          <div class="tit clearfix">
            <span class="ranking fl">书名</span>
            <span class="name fl"></span>
            <span class="company fl"></span>
            <span class="hot fl"></span>
          </div>
          <div class="con-wrap">
            <div class="over-wrap">
              <ul class="con">

                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">齐民要术</span>
                    <span class="company fl">北魏</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/齐民要术.png" alt="../img/齐民要术../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">贾思勰</span></p>
                      <p><span>ISBN：</span><span class="isbn">1</span></p>
                      <p><span>朝代：</span><span class="pub-date">北魏</span></p>
                      <p><span>性质：</span><span class="pricing">农政</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">吕氏春秋·上农四篇</span>
                    <span class="company fl">战国</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/吕氏春秋.png" alt="../img/吕氏春秋·上农四篇../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">吕不韦</span></p>
                      <p><span>ISBN：</span><span class="isbn">2</span></p>
                      <p><span>朝代：</span><span class="pub-date">战国</span></p>
                      <p><span>性质：</span><span class="pricing">农本思想</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">四民月令</span>
                    <span class="company fl">东汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/四民月令.png" alt="../img/四民月令../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">崔寔</span></p>
                      <p><span>ISBN：</span><span class="isbn">5</span></p>
                      <p><span>朝代：</span><span class="pub-date">东汉</span></p>
                      <p><span>性质：</span><span class="pricing">月令体</span></p>
                    </div>
                  </div>
                </li>

                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">氾胜之书</span>
                    <span class="company fl">西汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/氾胜之书.png" alt="../img/氾胜之书../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">氾胜之</span></p>
                      <p><span>ISBN：</span><span class="isbn">6</span></p>
                      <p><span>朝代：</span><span class="pub-date">西汉</span></p>
                      <p><span>性质：</span><span class="pricing">区田法</span></p>
                    </div>
                  </div>
                </li>


              </ul>
              <ul class="con">
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">农政全书</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农政全书.png" alt="../img/农政全书../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">徐光启</span></p>
                      <p><span>ISBN：</span><span class="isbn">3</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">农政</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">授时通考</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/授时通考.png" alt="../img/授时通考../img/封面">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">鄂尔泰</span></p>
                      <p><span>ISBN：</span><span class="isbn">4</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">官修农书</span></p>
                    </div>
                  </div>
                </li>
                <!-- 8.../img/群芳谱../img/及../img/广群芳谱../img/（明/清） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">群芳谱</span>
                    <span class="company fl">明/清</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/群芳谱.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">王象晋/汪灏</span></p>
                      <p><span>ISBN：</span><span class="isbn">8</span></p>
                      <p><span>朝代：</span><span class="pub-date">明/清</span></p>
                      <p><span>性质：</span><span class="pricing">植物学</span></p>
                    </div>
                  </div>
                </li>

                <!-- 9.../img/月令七十二候集解../img/（元代）   -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">月令七十二候集解</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/月令七十二候集解.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">吴澄</span></p>
                      <p><span>ISBN：</span><span class="isbn">9</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">节气历法</span></p>
                    </div>
                  </div>
                </li>


              </ul>
              <ul class="con">
                <!-- 11.../img/月令广义../img/（明代） -->
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">月令广义</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/月令广义.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">冯应京</span></p>
                      <p><span>ISBN：</span><span class="isbn">11</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">节气民俗</span></p>
                    </div>
                  </div>
                </li>

                <!-- 12.../img/陈旉农书../img/（宋代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">陈旉农书</span>
                    <span class="company fl">宋代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/陈旉农书.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">陈旉</span></p>
                      <p><span>ISBN：</span><span class="isbn">12</span></p>
                      <p><span>朝代：</span><span class="pub-date">宋代</span></p>
                      <p><span>性质：</span><span class="pricing">江南农事</span></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">农桑辑要</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农桑辑要.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">司农司</span></p>
                      <p><span>ISBN：</span><span class="isbn">13</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">官修农书</span></p>
                    </div>
                  </div>
                </li>

                <!-- 14.../img/天工开物../img/（明代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">天工开物</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/天工开物.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">宋应星</span></p>
                      <p><span>ISBN：</span><span class="isbn">14</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">手工业</span></p>
                    </div>
                  </div>
                </li>


              </ul>
              <ul class="con">
                <!-- 16.../img/淮南子·时则训../img/（西汉） -->
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">淮南子·时则训</span>
                    <span class="company fl">西汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/淮南子时则训.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">刘安</span></p>
                      <p><span>ISBN：</span><span class="isbn">16</span></p>
                      <p><span>朝代：</span><span class="pub-date">西汉</span></p>
                      <p><span>性质：</span><span class="pricing">月令体系</span></p>
                    </div>
                  </div>
                </li>
                <!-- 17.../img/礼记·月令../img/（西汉） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">礼记·月令</span>
                    <span class="company fl">西汉</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/礼记月令.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">戴圣</span></p>
                      <p><span>ISBN：</span><span class="isbn">17</span></p>
                      <p><span>朝代：</span><span class="pub-date">西汉</span></p>
                      <p><span>性质：</span><span class="pricing">经典月令</span></p>
                    </div>
                  </div>
                </li>

                <!-- 18.../img/沈氏农书../img/（明代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">沈氏农书</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/沈氏农书.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">沈氏</span></p>
                      <p><span>ISBN：</span><span class="isbn">18</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">江南农技</span></p>
                    </div>
                  </div>
                </li>

                <!-- 19.../img/三农纪../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">三农纪</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/三农纪.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">张宗法</span></p>
                      <p><span>ISBN：</span><span class="isbn">19</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">山区农业</span></p>
                    </div>
                  </div>
                </li>


              </ul>
              <ul class="con">
                <!-- 21.../img/田家五行../img/（元代） -->
                <li class="active">
                  <div class="book-rank clearfix">
                    <span class="ranking fl">1</span>
                    <span class="name fl">田家五行</span>
                    <span class="company fl">元代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/田家五行.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">娄元礼</span></p>
                      <p><span>ISBN：</span><span class="isbn">21</span></p>
                      <p><span>朝代：</span><span class="pub-date">元代</span></p>
                      <p><span>性质：</span><span class="pricing">气象农谚</span></p>
                    </div>
                  </div>
                </li>

                <!-- 22.../img/农候杂占../img/（明代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">2</span>
                    <span class="name fl">农候杂占</span>
                    <span class="company fl">明代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农候杂占.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">梁章钜</span></p>
                      <p><span>ISBN：</span><span class="isbn">22</span></p>
                      <p><span>朝代：</span><span class="pub-date">明代</span></p>
                      <p><span>性质：</span><span class="pricing">占候术</span></p>
                    </div>
                  </div>
                </li>

                <!-- 23.../img/农丹../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">3</span>
                    <span class="name fl">农丹</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/农丹.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">张标</span></p>
                      <p><span>ISBN：</span><span class="isbn">23</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">地气理论</span></p>
                    </div>
                  </div>
                </li>

                <!-- 24.../img/知本提纲·农则../img/（清代） -->
                <li>
                  <div class="book-rank clearfix">
                    <span class="ranking fl">4</span>
                    <span class="name fl">知本提纲·农则</span>
                    <span class="company fl">清代</span>
                    <span class="hot fl">农业</span>
                  </div>
                  <div class="book-show clearfix">
                    <div class="img-box fl">
                      <img src="./img/知本提纲农则.png" alt="">
                    </div>
                    <div class="content fl">
                      <p><span>作者：</span><span class="authors">杨屾</span></p>
                      <p><span>ISBN：</span><span class="isbn">24</span></p>
                      <p><span>朝代：</span><span class="pub-date">清代</span></p>
                      <p><span>性质：</span><span class="pricing">理学农学</span></p>
                    </div>
                  </div>
                </li>


              </ul>
            </div>
          </div>
        </div>
        <div class="bottom left-bottom">
          <div class="bottom-in">
            <h3>农书内容涉及比重排名</h3>
            <div class="tit clearfix">
              <span class="ranking fl"></span>
              <span class="short fl">书名</span>
              <span class="hot fl">作者</span>
            </div>
            <ul class="con">
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">1</span>
                  <span class="short fl">种植业</span>
                  <span class="hot fl">9.85</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">2</span>
                  <span class="short fl">土壤与耕作</span>
                  <span class="hot fl">9.64</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">3</span>
                  <span class="short fl">农具与农田水利</span>
                  <span class="hot fl">9.57</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">4</span>
                  <span class="short fl">畜牧业</span>
                  <span class="hot fl">9.43</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">5</span>
                  <span class="short fl">蚕桑业</span>
                  <span class="hot fl">9.26</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">6</span>
                  <span class="short fl">农产品加工与储藏</span>
                  <span class="hot fl">9.15</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">7</span>
                  <span class="short fl">园艺与林业</span>
                  <span class="hot fl">9.04</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">8</span>
                  <span class="short fl">气象与农事历法</span>
                  <span class="hot fl">8.80</span>
                </div>
              </li>
              <li>
                <div class="book-rank clearfix">
                  <span class="ranking fl">9</span>
                  <span class="short fl">农业经济与政策</span>
                  <span class="hot fl">8.75</span>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="middle-map fl">
        <div class="map-wrap">
          <div style="margin-top: 0px; margin-bottom: 15px; color: #fff; font-size: 16px; padding-left: 10px;">
            地域信息(审图号：GS(2024)0650号)
          </div>
          <div id="map-interaction-guide" style="
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            z-index: 1000;
            opacity: 0.8;
            transition: opacity 0.3s ease;
            max-width: 200px;
            line-height: 1.4;
          ">
            <div style="font-weight: bold; margin-bottom: 4px;">💡 交互提示</div>
            <div>• 悬停查看省份信息</div>
            <div>• 点击锁定/取消选中</div>
            <div>• 按ESC或点击外部取消</div>
          </div>
            <div class="stats-info" style="
                display: flex;
                justify-content: space-around;
                padding: 15px 10px; /* 增加内边距 */
                margin: 10px 0; /* 增加外边距 */
                background: rgba(0, 0, 0, 0.25); /* 稍微加深背景 */
                border: 1px solid rgba(156, 204, 101, 0.4); /* 增强边框 */
                border-radius: 8px; /* 添加圆角 */
            ">
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 20px; /* 增加左右内边距 */
                    position: relative;
                ">
                    <div style="font-size: 15px; font-weight: 500;">农学古籍</div> <!-- 增大字体并加粗 -->
                    <div style="font-size: 18px; color: #D4E157; margin-top: 8px; font-weight: 600;">约550本</div> <!-- 增大字体、间距和字重 -->
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">农具数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约280种</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">作物数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约150种</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">农谚数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">2万余条</div>
                </div>
                <div style="
                    width: 2px;
                    background: linear-gradient(to bottom, 
                        rgba(156, 204, 101, 0), 
                        rgba(156, 204, 101, 0.8) 20%, 
                        rgba(212, 225, 87, 1) 50%,
                        rgba(156, 204, 101, 0.8) 80%,
                        rgba(156, 204, 101, 0));
                    height: 40px;
                    margin: 5px 0;
                    box-shadow: 0 0 5px rgba(156, 204, 101, 0.3);
                "></div>
                <div style="
                    text-align: center;
                    color: #fff;
                    padding: 0 15px;
                    position: relative;
                ">
                    <div style="font-size: 14px;">养殖种数</div>
                    <div style="font-size: 16px; color: #D4E157; margin-top: 5px;">约50种</div>
                </div>
            </div>
          <div id="map" style="width: 100%; max-width: 1200px; height: 80vh; max-height: 800px; margin: 0 auto; overflow: hidden;"></div>

          <!-- 农作物控制面板 -->
          <div id="crop-control-panel" style="
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #0692a4;
            border-radius: 8px;
            padding: 15px;
            color: #fff;
            font-size: 12px;
            z-index: 1000;
            display: none;
            min-width: 200px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
          ">
            <div style="font-size: 14px; font-weight: bold; margin-bottom: 10px; color: #FFD700;">
              🌾 农作物分布
            </div>

            <!-- 显示/隐藏开关 -->
            <div style="margin-bottom: 10px;">
              <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="crop-toggle" checked style="margin-right: 8px;">
                <span>显示农作物分布点</span>
              </label>
            </div>

            <!-- 刷新按钮 -->
            <div style="margin-bottom: 10px;">
              <button id="refresh-crops" onclick="forceRefreshCropData()" style="
                background: linear-gradient(45deg, #32CD32, #228B22);
                color: white;
                border: none;
                padding: 6px 12px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 12px;
                transition: all 0.3s ease;
              " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                🔄 刷新农作物数据
              </button>
            </div>

            <!-- 数据统计显示 -->
            <div id="crop-stats" style="margin-bottom: 10px; padding: 8px; background: rgba(0,0,0,0.3); border-radius: 4px;">
              <div style="font-size: 12px; color: #FFD700; margin-bottom: 4px;">📊 数据统计</div>
              <div id="crop-count" style="font-size: 11px; color: #ccc;">加载中...</div>
            </div>

            <!-- 农作物类型图例 -->
            <div id="crop-legend" style="margin-top: 10px;">
              <div style="font-size: 12px; margin-bottom: 8px; color: #ccc;">图例说明：</div>
              <div style="display: flex; flex-direction: column; gap: 4px;">
                <div style="display: flex; align-items: center;">
                  <span style="width: 12px; height: 12px; background: #FFD700; border-radius: 50%; margin-right: 8px;"></span>
                  <span>🌾 谷物类</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="width: 12px; height: 12px; background: #32CD32; border-radius: 50%; margin-right: 8px;"></span>
                  <span>🌱 经济作物</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="width: 12px; height: 12px; background: #FF6347; border-radius: 50%; margin-right: 8px;"></span>
                  <span>🍎 水果类</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="width: 12px; height: 12px; background: #8B4513; border-radius: 50%; margin-right: 8px;"></span>
                  <span>☕ 饮料作物</span>
                </div>
                <div style="display: flex; align-items: center;">
                  <span style="width: 12px; height: 12px; background: #90EE90; border-radius: 50%; margin-right: 8px;"></span>
                  <span>🥬 蔬菜类</span>
                </div>
              </div>
            </div>

            <!-- 数据来源说明 -->
            <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid #444; font-size: 10px; color: #999;">
              数据来源：国家统计局、农业农村部
            </div>
          </div>
        </div>
      </div>
      <div class="aside-right fl">
        <div class="pie clearfix">
          <div class="pie1 fl">
            <h3>作物占比</h3>
            <div id="pie1" style="width: 100%;height: 80%;"></div>
          </div>
          <div class="pie2 fl">
            <h3>工具占比</h3>
            <div id="pie2" style="width: 100%;height: 80%;"></div>
          </div>
        </div>
        <div class="area-rank">
          <h3>农畜词频排行</h3>
          <div class="con">
            <ul>
              <li>
                <span class="num">1</span>
                <span class="city-name">蚕</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">2</span>
                <span class="city-name">猪</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">3</span>
                <span class="city-name">牛</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">4</span>
                <span class="city-name">鸡</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">5</span>
                <span class="city-name">羊</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">6</span>
                <span class="city-name">鱼</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">7</span>
                <span class="city-name">马</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">8</span>
                <span class="city-name">驴</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
              <li>
                <span class="num">9</span>
                <span class="city-name">兔</span>
                <span class="bar">
                  <b class="bar-in"></b>
                </span>
              </li>
            </ul>
                </div>
                  </div>
        <div class="trend" style="
          margin-top: 20px;
          padding: 15px;
          background: rgba(0, 0, 0, 0.15);
          border-radius: 10px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        ">
          <h3 style="
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: 500;
            color: #fff;
          ">历朝农业发展走势图</h3>
          <div id="trendBar1" style="width: 100%;height: 80%;"></div>
        </div>
                </div>
                </div>
    <div class="main-bottom">
      <span class="line1"></span>
      <span class="line2"></span>
      <span class="line3"></span>
                  </div>
                  </div>
  <script src="js/index.js"></script>
  <script src="js/cropData.js"></script>
  <script src="js/mapIndex.js"></script>

  <!-- 农作物控制功能 -->
  <script>
    // 农作物显示控制功能
    function initCropControl() {
      const cropToggle = document.getElementById('crop-toggle');
      const cropLegend = document.getElementById('crop-legend');

      // 验证农作物数据加载
      console.log('验证农作物数据加载状态...');
      if (typeof getCropDistributionData === 'function') {
        const cropData = getCropDistributionData();
        console.log('农作物数据加载成功，数据点数量:', cropData.length);
        console.log('前5个数据点:', cropData.slice(0, 5));

        // 更新数据统计显示
        updateCropStats(cropData);
      } else {
        console.error('农作物数据未加载！');
        const cropCountElement = document.getElementById('crop-count');
        if (cropCountElement) {
          cropCountElement.innerHTML = '❌ 数据加载失败';
        }
      }

      if (cropToggle) {
        cropToggle.addEventListener('change', function() {
          showCrops = this.checked;
          console.log('农作物显示状态切换为:', showCrops);

          // 清理所有tooltip，避免重叠
          if (typeof clearAllTooltips === 'function') {
            clearAllTooltips();
          }

          // 更新地图配置
          if (typeof mapChart !== 'undefined' && typeof option !== 'undefined') {
            // 重新构建series数组
            const baseSeries = [{
              name: "省份信息",
              type: "map",
              mapType: "china",
              roam: false,
              selectedMode: 'single',
              label: {
                normal: { show: false },
                emphasis: {
                  show: true,
                  textStyle: { color: '#fff', fontSize: 14, fontWeight: 'bold' }
                },
                select: {
                  show: true,
                  textStyle: { color: '#fff', fontSize: 14, fontWeight: 'bold' }
                }
              },
              itemStyle: {
                normal: {
                  areaColor: {
                    type: 'linear',
                    x: 0, y: 0, x2: 1, y2: 1,
                    colorStops: [
                      { offset: 0, color: 'rgb(255, 185, 45)' },
                      { offset: 0.5, color: 'rgb(244, 163, 13)' },
                      { offset: 1, color: 'rgb(180, 110, 8)' }
                    ]
                  },
                  borderColor: '#0692a4',
                  borderWidth: 2,
                  shadowBlur: 8,
                  shadowColor: 'rgba(180, 110, 8, 0.4)',
                  shadowOffsetX: 3,
                  shadowOffsetY: 3,
                  opacity: 0.95
                },
                emphasis: {
                  areaColor: {
                    type: 'linear',
                    x: 0, y: 0, x2: 1, y2: 1,
                    colorStops: [
                      { offset: 0, color: 'rgb(255, 120, 45)' },
                      { offset: 0.5, color: 'rgb(244, 71, 13)' },
                      { offset: 1, color: 'rgb(150, 30, 5)' }
                    ]
                  },
                  borderColor: '#fff',
                  borderWidth: 3,
                  shadowBlur: 15,
                  shadowColor: 'rgba(244, 71, 13, 0.7)',
                  shadowOffsetX: 5,
                  shadowOffsetY: 5,
                  opacity: 1
                },
                select: {
                  areaColor: {
                    type: 'linear',
                    x: 0, y: 0, x2: 1, y2: 1,
                    colorStops: [
                      { offset: 0, color: 'rgb(100, 180, 255)' },
                      { offset: 0.5, color: 'rgb(30, 144, 255)' },
                      { offset: 1, color: 'rgb(10, 90, 180)' }
                    ]
                  },
                  borderColor: '#fff',
                  borderWidth: 4,
                  shadowBlur: 20,
                  shadowColor: 'rgba(30, 144, 255, 0.8)',
                  shadowOffsetX: 6,
                  shadowOffsetY: 6,
                  opacity: 1
                }
              },
              emphasis: { scale: 1.1, focus: 'self' },
              select: {
                scale: 1.2,
                itemStyle: {
                  areaColor: "rgb(30, 144, 255)",
                  borderColor: '#fff',
                  borderWidth: 3,
                  shadowBlur: 15,
                  shadowColor: 'rgba(30, 144, 255, 0.6)'
                }
              },
              data: mapData["map"]
            }];

            // 根据开关状态添加农作物系列
            const newSeries = baseSeries.concat(showCrops ? createCropScatterSeries() : []);

            // 更新地图
            option.series = newSeries;
            mapChart.setOption(option, true);
          }

          // 更新图例显示状态
          if (cropLegend) {
            cropLegend.style.opacity = this.checked ? '1' : '0.5';
          }
        });
      }
    }



    // 强制刷新农作物数据显示
    function forceRefreshCropData() {
      console.log('强制刷新农作物数据...');

      if (typeof getCropDistributionData === 'function' && typeof mapChart !== 'undefined') {
        const cropData = getCropDistributionData();
        console.log('重新加载农作物数据，数量:', cropData.length);

        // 更新数据统计显示
        updateCropStats(cropData);

        // 强制显示农作物
        showCrops = true;
        const cropToggle = document.getElementById('crop-toggle');
        if (cropToggle) {
          cropToggle.checked = true;
        }

        // 重新构建地图配置
        const baseSeries = [{
          name: "省份信息",
          type: "map",
          mapType: "china",
          roam: false,
          selectedMode: 'single',
          label: {
            normal: { show: false },
            emphasis: {
              show: true,
              textStyle: { color: '#fff', fontSize: 14, fontWeight: 'bold' }
            }
          },
          itemStyle: {
            normal: {
              areaColor: 'rgb(244, 163, 13)',
              borderColor: '#0692a4',
              borderWidth: 1
            },
            emphasis: {
              areaColor: "rgb(244, 71, 13)",
              borderColor: '#fff',
              borderWidth: 2
            }
          },
          data: mapData["map"]
        }];

        // 添加农作物系列
        const cropSeries = createCropScatterSeries();
        console.log('创建的农作物系列数量:', cropSeries.length);

        const newSeries = baseSeries.concat(cropSeries);

        // 更新地图
        option.series = newSeries;
        mapChart.setOption(option, true);

        console.log('农作物数据刷新完成');
      }
    }

    // 更新农作物数据统计显示
    function updateCropStats(cropData) {
      const cropCountElement = document.getElementById('crop-count');
      if (cropCountElement && cropData) {
        // 统计各类型农作物数量
        const typeStats = {};
        cropData.forEach(crop => {
          typeStats[crop.type] = (typeStats[crop.type] || 0) + 1;
        });

        const typeNames = {
          'grain': '谷物',
          'economic': '经济作物',
          'fruit': '水果',
          'beverage': '饮料作物',
          'vegetable': '蔬菜'
        };

        let statsText = `总计: ${cropData.length} 个分布点<br>`;
        Object.keys(typeStats).forEach(type => {
          const name = typeNames[type] || type;
          statsText += `${name}: ${typeStats[type]} 个<br>`;
        });

        cropCountElement.innerHTML = statsText;
      }
    }

    // 页面加载完成后初始化控制功能
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(function() {
        initCropControl();
        // 延迟强制刷新农作物数据
        setTimeout(forceRefreshCropData, 2000);
      }, 1000);
    });
  </script>

  <script>
    (function() {
      console.log('初始化图表...');

      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
      const dynastyNames = {
        'Jan': '先秦',
        'Feb': '汉',
        'Mar': '魏晋',
        'Apr': '唐',
        'May': '宋',
        'Jun': '明',
        'Jul': '清'
      };

      // 作物数据
      const cropData = {
        Jan: [
          { value: 27, name: '粟-先秦' },
          { value: 23, name: '黍-先秦' },
          { value: 15, name: '菽-先秦' },
          { value: 8, name: '麦-先秦' },
          { value: 7, name: '稻-先秦' },
          { value: 17, name: '其他-先秦' }
        ],
        Feb: [
          { value: 27, name: '粟-汉' },
          { value: 22, name: '麦-汉' },
          { value: 15, name: '稻-汉' },
          { value: 11, name: '菽-汉' },
          { value: 7, name: '黍-汉' },
          { value: 18, name: '其他-汉' }
        ],
        Mar: [
          { value: 26, name: '粟-魏晋' },
          { value: 22, name: '麦-魏晋' },
          { value: 14, name: '稻-魏晋' },
          { value: 11, name: '菽-魏晋' },
          { value: 8, name: '桑-魏晋' },
          { value: 19, name: '其他-魏晋' }
        ],
        Apr: [
          { value: 26, name: '粟-唐' },
          { value: 22, name: '稻-唐' },
          { value: 13, name: '麦-唐' },
          { value: 11, name: '黍-唐' },
          { value: 8, name: '菽-唐' },
          { value: 19, name: '其他-唐' }
        ],
        May: [
          { value: 27, name: '稻-宋' },
          { value: 22, name: '麦-宋' },
          { value: 15, name: '粟-宋' },
          { value: 11, name: '菽-宋' },
          { value: 7, name: '桑-宋' },
          { value: 18, name: '其他-宋' }
        ],
        Jun: [
          { value: 31, name: '稻-明' },
          { value: 21, name: '麦-明' },
          { value: 13, name: '粟-明' },
          { value: 9, name: '玉米-明' },
          { value: 7, name: '甘薯-明' },
          { value: 19, name: '其他-明' }
        ],
        Jul: [
          { value: 26, name: '稻-清' },
          { value: 23, name: '玉米-清' },
          { value: 13, name: '甘薯-清' },
          { value: 11, name: '麦-清' },
          { value: 7, name: '粟-清' },
          { value: 18, name: '其他-清' }
        ]
      };

      // 工具数据
      const toolData = {
        Jan: [
          { value: 50, name: '犁-西汉' },
          { value: 22, name: '耒-西汉' },
          { value: 17, name: '镰-西汉' },
          { value: 14, name: '锄-西汉' },
          { value: 7, name: '耙-西汉' },
          { value: 14, name: '磨盘-西汉' }
        ],
        Feb: [
          { value: 28, name: '犁-魏晋' },
          { value: 23, name: '镰-魏晋' },
          { value: 17, name: '锄-魏晋' },
          { value: 10, name: '耒-魏晋' },
          { value: 9, name: '耙-魏晋' },
          { value: 13, name: '铲-魏晋' }
        ],
        Mar: [
          { value: 29, name: '犁-唐' },
          { value: 21, name: '镰-唐' },
          { value: 15, name: '耒-唐' },
          { value: 12, name: '耙-唐' },
          { value: 9, name: '锄-唐' },
          { value: 14, name: '锯-唐' }
        ],
        Apr: [
          { value: 25, name: '犁-宋' },
          { value: 24, name: '镰-宋' },
          { value: 14, name: '锄-宋' },
          { value: 13, name: '耙-宋' },
          { value: 6, name: '耒-宋' },
          { value: 16, name: '铲-宋' }
        ],
        May: [
          { value: 26, name: '犁-元' },
          { value: 23, name: '镰-元' },
          { value: 13, name: '锄-元' },
          { value: 11, name: '耙-元' },
          { value: 8, name: '耒-元' },
          { value: 19, name: '铲-元' }
        ],
        Jun: [
          { value: 30, name: '犁-明' },
          { value: 22, name: '镰-明' },
          { value: 11, name: '锄-明' },
          { value: 10, name: '耙-明' },
          { value: 8, name: '铲-明' },
          { value: 19, name: '其他' }
        ],
        Jul: [
          { value: 26, name: '犁-清' },
          { value: 23, name: '镰-清' },
          { value: 13, name: '锄-清' },
          { value: 11, name: '铲-清' },
          { value: 7, name: '耙-清' },
          { value: 20, name: '其他' }
        ]
      };

      let currentIndex = 0;
      let currentItemIndex = -1;
      let pie1, pie2;
      let isAnimating = false;

      function getChartOption(data, title, dynasty) {
        return {
          title: {
            text: dynasty,
            left: 'center',
            top: 0,
            textStyle: {
              color: '#fff',
              fontSize: 16
            }
          },
          color: [
            '#D4E157', // 浅黄绿
            '#9CCC65', // 淡绿
            '#7CB342', // 中绿
            '#558B2F', // 深绿
            '#33691E', // 暗绿
            '#1B5E20'  // 深暗绿
          ],
          tooltip: {
            trigger: 'item',
            formatter: '{b}: {c}%'
          },
          legend: {
            orient: 'vertical',
            right: '-25%',
            top: 'middle',
            itemWidth: 14,
            itemHeight: 10,
            itemGap: 8,
            width: '40%',
            textStyle: {
              color: '#fff',
              fontSize: 11,
              lineHeight: 12,
              rich: {
                value: {
                  width: 40,
                  align: 'right'
                }
              }
            },
            formatter: function(name) {
              const value = data.find(item => item.name === name)?.value || '';
              const shortName = name.split('-')[0];
              return `{name|${shortName}}{value|}`;
            },
            textAlign: 'left',
            icon: 'rect',
            selectedMode: false,
            padding: [0, 10],
            itemStyle: {
              borderWidth: 0
            }
          },
          series: [{
            name: title,
            type: 'pie',
            radius: ['38%', '60%'],
            center: ['35%', '55%'],
            avoidLabelOverlap: true,
            itemStyle: {
              borderRadius: 1,
              borderColor: '#fff',
              borderWidth: 1
            },
            label: {
              show: false
            },
            labelLine: {
              show: false
            },
            emphasis: {
              scale: true,
              scaleSize: 10,
              focus: 'self'
            },
            data: data
          }]
        };
      }

      function updateCharts() {
        if (isAnimating) return;
        isAnimating = true;

        const month = months[currentIndex];
        const dynasty = dynastyNames[month];
        currentItemIndex = (currentItemIndex + 1) % 6;
        
        const cropValue = cropData[month][currentItemIndex].value;
        const toolValue = toolData[month][currentItemIndex].value;
        
        const cropOption = getChartOption(cropData[month], '作物占比', dynasty);
        const toolOption = getChartOption(toolData[month], '工具占比', dynasty);
        
        cropOption.graphic = [{
          type: 'text',
          left: '25%',
          top: '50%',
          style: {
            text: cropValue + '%',
            textAlign: 'center',
            fill: '#ffffff',
            fontSize: 20,
            fontWeight: 'bold'
          }
        }];
        
        toolOption.graphic = [{
          type: 'text',
          left: '25%',
          top: '50%',
          style: {
            text: toolValue + '%',
            textAlign: 'center',
            fill: '#ffffff',
            fontSize: 20,
            fontWeight: 'bold'
          }
        }];

        // 设置所有数据项显示
        cropOption.series[0].data = cropData[month].map(item => ({
          ...item,
          itemStyle: {
            opacity: 1
          }
        }));

        toolOption.series[0].data = toolData[month].map(item => ({
          ...item,
          itemStyle: {
            opacity: 1
          }
        }));

        pie1.setOption(cropOption, true);
        pie2.setOption(toolOption, true);

        setTimeout(() => {
          isAnimating = false;
          currentIndex = (currentIndex + 1) % months.length;
        }, 3000);
      }

      window.addEventListener('DOMContentLoaded', function() {
        console.log('DOM加载完成，初始化图表...');

        pie1 = echarts.init(document.getElementById('pie1'));
        pie2 = echarts.init(document.getElementById('pie2'));

        if (window.chartTimer) {
          clearInterval(window.chartTimer);
        }

        updateCharts();
        window.chartTimer = setInterval(updateCharts, 3500);

        window.addEventListener('resize', function() {
          if (pie1 && pie2) {
            pie1.resize();
            pie2.resize();
          }
        });
      });

      // 移除之前的动画相关代码，添加新的独立初始化代码
      document.addEventListener('DOMContentLoaded', function() {
        const rankItems = document.querySelectorAll('.area-rank .con li');
        const widths = [95, 90, 85, 80, 75, 70, 65, 60, 55];
        
        // 延迟执行动画
        setTimeout(() => {
          rankItems.forEach((item, index) => {
            const barIn = item.querySelector('.bar-in');
            if (barIn) {
              barIn.style.width = widths[index] + '%';
            }
          });
        }, 500);
      });

      var trendBar1 = echarts.init(document.getElementById('trendBar1'));
      var trendBar1Option = {
        color: ['#D4E157', '#9CCC65'],
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          },
          textStyle: {
            color: '#fff'
          }
        },
        legend: {
          data: ['发展程度', '同比增长'],
          textStyle: {
            color: '#fff'
          },
          right: '10%'
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis: [{
          type: 'category',
          data: ['先秦', '西汉', '东汉', '魏晋', '隋唐', '宋', '元', '明', '清'],
          axisLine: {
            lineStyle: {
              color: '#fff'
            }
          },
          axisLabel: {
            color: '#fff',
            textStyle: {
              color: '#fff'
            }
          },
          nameTextStyle: {
            color: '#fff'
          }
        }],
        yAxis: [{
          type: 'value',
          name: '发展指数',
          nameTextStyle: {
            color: '#fff'
          },
          min: 0,
          max: 100,
          interval: 20,
          axisLine: {
            lineStyle: {
              color: '#fff'
            }
          },
          axisLabel: {
            color: '#fff',
            textStyle: {
              color: '#fff'
            }
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: 'rgba(255, 255, 255, 0.1)'
            }
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: '#fff'
            }
          }
        }],
        series: [{
          name: '发展程度',
          type: 'line',
          smooth: true,
          lineStyle: {
            width: 3,
            color: '#D4E157'
          },
          itemStyle: {
            color: '#D4E157'
          },
          areaStyle: {
            color: {
              type: 'linear',
              x: 0,
              y: 0,
              x2: 0,
              y2: 1,
              colorStops: [{
                offset: 0,
                color: 'rgba(212, 225, 87, 0.3)'
              }, {
                offset: 1,
                color: 'rgba(212, 225, 87, 0.1)'
              }]
            }
          },
          data: [45, 52, 48, 55, 58, 62, 60, 75, 71]
        }, {
          name: '同比增长',
          type: 'line',
          smooth: true,
          lineStyle: {
            width: 3,
            color: '#9CCC65'
          },
          itemStyle: {
            color: '#9CCC65'
          },
          areaStyle: {
            color: {
              type: 'linear',
              x: 0,
              y: 0,
              x2: 0,
              y2: 1,
              colorStops: [{
                offset: 0,
                color: 'rgba(156, 204, 101, 0.3)'
              }, {
                offset: 1,
                color: 'rgba(156, 204, 101, 0.1)'
              }]
            }
          },
          data: [50, 48, 55, 50, 54, 60, 58, 70, 68]
        }]
      };
      trendBar1.setOption(trendBar1Option);
    })();

    // 添加书籍轮播逻辑
    function initBookCarousel() {
        const bookGroups = [
            // 第一组书籍 - 古代农学古籍
            [
                { ranking: 1, name: '齐民要术', dynasty: '北魏', type: '农业', author: '贾思勰', isbn: '1', period: '北魏', nature: '农政' },
                { ranking: 2, name: '吕氏春秋·上农四篇', dynasty: '战国', type: '农业', author: '吕不韦', isbn: '2', period: '战国', nature: '农本思想' },
                { ranking: 3, name: '四民月令', dynasty: '东汉', type: '农业', author: '崔寔', isbn: '5', period: '东汉', nature: '月令体' },
                { ranking: 4, name: '氾胜之书', dynasty: '西汉', type: '农业', author: '氾胜之', isbn: '6', period: '西汉', nature: '区田法' }
            ],
            // 第二组书籍
            [
                { ranking: 1, name: '农政全书', dynasty: '明代', type: '农业', author: '徐光启', isbn: '3', period: '明代', nature: '农政' },
                { ranking: 2, name: '授时通考', dynasty: '清代', type: '农业', author: '鄂尔泰', isbn: '4', period: '清代', nature: '官修农书' },
                { ranking: 3, name: '群芳谱', dynasty: '明/清', type: '农业', author: '王象晋/汪灏', isbn: '8', period: '明/清', nature: '植物学' },
                { ranking: 4, name: '月令七十二候集解', dynasty: '元代', type: '农业', author: '吴澄', isbn: '9', period: '元代', nature: '节气历法' },
                { ranking: 5, name: '夏小正', dynasty: '先秦', type: '农业', author: '佚名', isbn: '10', period: '先秦', nature: '物候历' },
                { ranking: 6, name: '陈旉农书', dynasty: '宋代', type: '农业', author: '陈旉', isbn: '12', period: '宋代', nature: '江南农事' }
            ],
            // 第三组书籍
            [
                { ranking: 1, name: '月令广义', dynasty: '明代', type: '农业', author: '冯应京', isbn: '11', period: '明代', nature: '节气民俗' },
                { ranking: 2, name: '农桑辑要', dynasty: '元代', type: '农业', author: '司农司', isbn: '13', period: '元代', nature: '官修农书' },
                { ranking: 3, name: '天工开物', dynasty: '明代', type: '农业', author: '宋应星', isbn: '14', period: '明代', nature: '手工业' },
                { ranking: 4, name: '岁时广记', dynasty: '宋代', type: '农业', author: '陈元靓', isbn: '15', period: '宋代', nature: '节气民俗' }
            ]
        ];

        let currentGroupIndex = 0;
        let currentBookIndex = 0;
        const bookList = document.querySelector('.left-top .con');
        
        function updateBookDisplay(groupIndex) {
            const currentGroup = bookGroups[groupIndex];
            let booksHtml = '';
            
            currentGroup.forEach((book, index) => {
                booksHtml += `
                    <li class="${index === currentBookIndex ? 'active' : ''}">
                        <div class="book-rank clearfix">
                            <span class="ranking fl">${book.ranking}</span>
                            <span class="name fl">${book.name}</span>
                            <span class="company fl">${book.dynasty}</span>
                            <span class="hot fl">${book.type}</span>
                        </div>
                        <div class="book-show clearfix">
                            <div class="img-box fl">
                                <img src="./img/${book.name}.png" alt="">
                            </div>
                            <div class="content fl">
                                <p><span>作者：</span><span class="authors">${book.author}</span></p>
                                <p><span>ISBN：</span><span class="isbn">${book.isbn}</span></p>
                                <p><span>朝代：</span><span class="pub-date">${book.period}</span></p>
                                <p><span>性质：</span><span class="pricing">${book.nature}</span></p>
                            </div>
                        </div>
                    </li>
                `;
            });
            
            bookList.innerHTML = booksHtml;
        }

        function nextBook() {
            const currentGroup = bookGroups[currentGroupIndex];
            currentBookIndex++;
            if (currentBookIndex >= currentGroup.length) {
                currentBookIndex = 0;
                currentGroupIndex = (currentGroupIndex + 1) % bookGroups.length;
                updateBookDisplay(currentGroupIndex);
            } else {
                const books = document.querySelectorAll('.left-top .con li');
                books.forEach((book, index) => {
                    book.classList.remove('active');
                    if (index === currentBookIndex) {
                        book.classList.add('active');
                    }
                });
            }
        }

        // 初始显示第一组书籍
        updateBookDisplay(0);

        // 每3秒切换一次活跃的书籍
        setInterval(nextBook, 3000);
    }

    // 在页面加载完成后初始化书籍轮播
    document.addEventListener('DOMContentLoaded', function() {
        initBookCarousel();
    });

    // 修改地图配置
    var mapOption = {
        tooltip: {
            trigger: 'item',
            formatter: '{b}'
        },
        visualMap: {
            min: 0,
            max: 100,
            left: '10%',
            bottom: '10%',
            text: ['高', '低'],
            inRange: {
                color: [
                    '#F4E4BC',  // 米黄色
                    '#E4C17C',  // 浅驼色
                    '#D4B168',  // 沙黄色
                    '#C19A48',  // 土黄色
                    '#B38B35',  // 枯黄色
                    '#A67C00',  // 金黄色
                    '#955C00'   // 赭黄色
                ]
            },
            textStyle: {
                color: '#fff'
            }
        },
        series: [{
            name: '中国',
            type: 'map',
            mapType: 'china',
            roam: false,
            label: {
                normal: {
                    show: true,
                    textStyle: {
                        color: '#333'
                    }
                },
                emphasis: {
                    show: true,
                    textStyle: {
                        color: '#333'
                    }
                }
            },
            itemStyle: {
                normal: {
                    borderColor: '#fff',
                    areaColor: '#F4E4BC'
                },
                emphasis: {
                    areaColor: '#A67C00',
                    borderWidth: 1
                }
            },
            data: [
                {name: '北京', value: 95},
                {name: '天津', value: 85},
                {name: '上海', value: 90},
                {name: '重庆', value: 80},
                {name: '河北', value: 75},
                {name: '河南', value: 85},
                {name: '云南', value: 65},
                {name: '辽宁', value: 70},
                {name: '黑龙江', value: 65},
                {name: '湖南', value: 80},
                {name: '安徽', value: 75},
                {name: '山东', value: 85},
                {name: '新疆', value: 55},
                {name: '江苏', value: 90},
                {name: '浙江', value: 88},
                {name: '江西', value: 75},
                {name: '湖北', value: 80},
                {name: '广西', value: 70},
                {name: '甘肃', value: 60},
                {name: '山西', value: 65},
                {name: '内蒙古', value: 60},
                {name: '陕西', value: 70},
                {name: '吉林', value: 65},
                {name: '福建', value: 75},
                {name: '贵州', value: 65},
                {name: '广东', value: 85},
                {name: '青海', value: 55},
                {name: '西藏', value: 50},
                {name: '四川', value: 80},
                {name: '宁夏', value: 60},
                {name: '海南', value: 65},
                {name: '台湾', value: 70},
                {name: '香港', value: 80},
                {name: '澳门', value: 80}
            ]
        }]
    };
    // 使用刚指定的配置项和数据显示图表
    // map.setOption(mapOption); // 注释掉，因为主地图已经在mapIndex.js中配置了
  </script>
</body>

</html>
