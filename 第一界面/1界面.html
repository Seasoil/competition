<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂªøÂõõ</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: url('./ËäÇÊ∞îÁïåÈù¢/img/ËÉåÊôØÂõæÔºàËäÇÊ∞îÔºâ.png');
            font-family: 'Microsoft YaHei', sans-serif;
        }

        .main-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: rgba(199, 185, 185, 0.08);
            box-shadow: 0 4px 20px rgba(199, 185, 185, 0.08);
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 40px;
            backdrop-filter: blur(6px);
        }

        .nav-buttons {
            display: flex;
            gap: 25px;
            margin-left: auto;
        }

        .nav-button {
            padding: 12px 28px;
            border-radius: 6px;
            background: rgb(84, 82, 82);
            color: #e2eae6;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-button:hover {
            background: #f4e110;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.25);
        }

        .nav-button i {
            font-size: 18px;
        }

        #chart-container {
            margin-top: 100px;
            height: calc(100vh - 100px);
        }

        #time-axis {
            position: fixed;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            height: 70vh;
            width: 50px;
            background: #fff;
            border-radius: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 2;
            padding: 15px 5px;
        }

        #time-labels {
            position: absolute;
            left: -60px;
            top: 0;
            height: 100%;
            width: 50px;
            pointer-events: none;
        }

        .time-label {
            position: absolute;
            right: 10px;
            transform: translateY(-50%);
            color: #4a7a3d;
            font-size: 12px;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            white-space: nowrap;
        }

        .time-label::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            width: 4px;
            height: 1px;
            background: #8bc34a;
        }

        #time-slider {
            -webkit-appearance: slider-vertical;
            width: 100%;
            height: 100%;
            margin: 0;
            cursor: pointer;
            background: transparent;
            transition: transform 0.1s ease-out;
        }

        #time-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #0c9d10;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .term-tooltip {
            position: absolute;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            width: 280px;
            pointer-events: none;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-origin: center;
            border: 1px solid #eee;
            z-index: 3;
        }

        .term-tooltip h3 {
            color: #098949;
            margin: 0 0 12px 0;
            font-size: 20px;
        }

        .term-tooltip p {
            color: #666;
            margin: 8px 0;
            line-height: 1.6;
            font-size: 14px;
        }
    </style>
    <script src="./js/echarts (2).js"></script>
    <script src="./js/anime.min.js"></script>
    <script src="./js/lodash.min.js"></script>
</head>

<body>
    <nav class="main-nav">
        <h1 style="color: #2c7a53; font-size: 24px;"></h1>
        <div class="nav-buttons">
            <button class="nav-button" onclick="window.location.href='../index.html'">
                <i></i>‰∏ªÁïåÈù¢
            </button>
            <button class="nav-button" onclick="window.location.href='../Á¨¨‰∫åÁïåÈù¢/ÂÖ≥Á≥ªÂõæ.html'">
                <i></i>Á¨¨‰∫åÁïåÈù¢
            </button>
            <button class="nav-button" onclick="window.location.href='../Á¨¨‰∏âÁïåÈù¢/‰∫∫ÁïåÈù¢.html'">
                <i></i>Á¨¨‰∏âÁïåÈù¢
            </button>
            <button class="nav-button" onclick="window.location.href='./ËäÇÊ∞îÁïåÈù¢/ÂÜúË∞ö.html'">
                <i></i>ÂÜúË∞öÁïåÈù¢
            </button>
        </div>
    </nav>

    <div id="chart-container"></div>
    <div id="time-axis">
        <input type="range" id="time-slider" min="0" max="365" value="0" orient="vertical">
        <div id="time-labels"></div>
    </div>
    <div id="term-tooltip" class="term-tooltip"></div>

    <script>
        // Â≠£ËäÇÈ¢úËâ≤Êò†Â∞Ñ
        const seasonColors = {
            'Êò•': '#8bc34a',
            'Â§è': '#ffb74d',
            'Áßã': '#f44336',
            'ÂÜ¨': '#2196f3'
        };
        const navButtons = document.querySelectorAll('.nav-button');

        navButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                // Ê∑ªÂä†È°µÈù¢ËøáÊ∏°Âä®Áîª
                anime({
                    targets: 'body',
                    opacity: 0,
                    duration: 400,
                    easing: 'easeInOutQuad',
                    complete: () => {
                        window.location.href = button.onclick.toString().match(/'(.*?)'/)[1];
                    }
                });
            });
        });
        // ËäÇÊ∞îÊï∞ÊçÆ
        const solarTermsData = [
            { name: 'Á´ãÊò•', season: 'Êò•', date: '2Êúà3-5Êó•', desc: 'Êò•ËÄïÂ§áËÄïÂºÄÂßãÔºåÊ£ÄÊü•ÂÜúÂÖ∑ÔºåÂáÜÂ§áÊó©Á®ªËÇ≤Áßß' },
            { name: 'Èõ®Ê∞¥', season: 'Êò•', date: '2Êúà18-20Êó•', desc: 'ÂÜ¨Â∞èÈ∫¶ÂºÄÂßãËøîÈùíÔºåÊ±üÂçóÂú∞Âå∫Ê≤πËèúËøΩËÇ•' },
            { name: 'ÊÉäËõ∞', season: 'Êò•', date: '3Êúà5-7Êó•', desc: 'Êò•ËÄïÂÖ®Èù¢Â±ïÂºÄÔºåÈò≤Ê≤ªË∂äÂÜ¨ÂÆ≥Ëô´ÔºåÊûúÊ†ë‰øÆÂâ™' },
            { name: 'Êò•ÂàÜ', season: 'Êò•', date: '3Êúà20-22Êó•', desc: 'Êò•Êí≠‰ΩúÁâ©Êí≠ÁßçÂÖ≥ÈîÆÊúüÔºåÂ∞èÈ∫¶ËøõÂÖ•ÊãîËäÇÊúü' },
            { name: 'Ê∏ÖÊòé', season: 'Êò•', date: '4Êúà4-6Êó•', desc: 'Êó©Á®ªÊèíÁßßÔºåÁéâÁ±≥Êí≠ÁßçÔºåËå∂Âõ≠Êò•ÁÆ°ÂÖ≥ÈîÆÊúü' },
            { name: 'Ë∞∑Èõ®', season: 'Êò•', date: '4Êúà19-21Êó•', desc: 'Ê∞¥Á®ªÁßªÊ†ΩÔºåÊ£âËä±Êí≠ÁßçÔºåÈò≤Ê≤ªÂ∞èÈ∫¶Ëµ§ÈúâÁóÖ' },

            { name: 'Á´ãÂ§è', season: 'Â§è', date: '5Êúà5-7Êó•', desc: 'Â§èÊî∂‰ΩúÁâ©ÁÅåÊµÜÂÖ≥ÈîÆÊúüÔºåÊó©Á®ªÂàÜËòñËÇ•ÊñΩÁî®' },
            { name: 'Â∞èÊª°', season: 'Â§è', date: '5Êúà20-22Êó•', desc: 'Â∞èÈ∫¶Á±ΩÁ≤íÈ•±Êª°ÔºåÊ≤πËèúÊî∂Ëé∑ÔºåÊ∞¥Á®ªÊôíÁî∞ÊéßËòñ' },
            { name: 'ËäíÁßç', season: 'Â§è', date: '6Êúà5-7Êó•', desc: 'Â§èÊî∂Â§èÁßçÂÖ≥ÈîÆÊúüÔºåÊä¢Êî∂Â∞èÈ∫¶ÔºåÊí≠ÁßçÊôöÁ®ª' },
            { name: 'Â§èËá≥', season: 'Â§è', date: '6Êúà21-22Êó•', desc: '‰∏≠Á®ªËøΩËÇ•ÔºåÊ£âËä±Êï¥ÊûùÔºåÈò≤Ê≤ªÊ∞¥Á®ªÁ∫πÊûØÁóÖ' },
            { name: 'Â∞èÊöë', season: 'Â§è', date: '7Êúà6-8Êó•', desc: 'Êó©Á®ªÊî∂Ââ≤ÔºåÊôöÁ®ªÁßªÊ†ΩÔºåÁéâÁ±≥ËøΩËÇ•' },
            { name: 'Â§ßÊöë', season: 'Â§è', date: '7Êúà22-24Êó•', desc: 'ÂèåÂ≠£Á®ªÂå∫Êä¢Êî∂Êä¢ÁßçÔºåÊäóÊó±‰øùËãóÂÖ≥ÈîÆÊúü' },

            { name: 'Á´ãÁßã', season: 'Áßã', date: '8Êúà7-9Êó•', desc: 'Ê∞¥Á®ªÂ≠ïÁ©óÊúüÁÆ°ÁêÜÔºåÁéâÁ±≥ÊéàÁ≤âÊúüÔºåÊ£âËä±ÊâìÈ°∂' },
            { name: 'Â§ÑÊöë', season: 'Áßã', date: '8Êúà22-24Êó•', desc: 'Ê∞¥Á®ªÈò≤Êó©Ë°∞ÔºåÁéâÁ±≥ÁÅåÊµÜÊúüÁÆ°ÁêÜÔºåÊûúÂõ≠ÊñΩËÇ•' },
            { name: 'ÁôΩÈú≤', season: 'Áßã', date: '9Êúà7-9Êó•', desc: 'ÊôöÁ®ªÊäΩÁ©óÊâ¨Ëä±ÊúüÔºåÂÜ¨Â∞èÈ∫¶Â§áËÄïÔºåÈááÊëòÁßãËå∂' },
            { name: 'ÁßãÂàÜ', season: 'Áßã', date: '9Êúà22-24Êó•', desc: 'ÁßãÊî∂ÁßãÁßçÂÖ≥ÈîÆÊúüÔºåÊî∂Ëé∑‰∏≠Á®ªÔºåÊí≠ÁßçÂÜ¨Â∞èÈ∫¶' },
            { name: 'ÂØíÈú≤', season: 'Áßã', date: '10Êúà8-9Êó•', desc: 'Êî∂Ëé∑ÊôöÁ®ªÔºåÊí≠ÁßçÊ≤πËèúÔºåÊûúÊ†ëÁßãÂ≠£‰øÆÂâ™' },
            { name: 'ÈúúÈôç', season: 'Áßã', date: '10Êúà23-24Êó•', desc: 'ÂÜ¨Â∞èÈ∫¶Âá∫ËãóÁÆ°ÁêÜÔºåËî¨ËèúÂ§ßÊ£öÈò≤ÂØíÂáÜÂ§á' },

            { name: 'Á´ãÂÜ¨', season: 'ÂÜ¨', date: '11Êúà7-8Êó•', desc: 'ÂÜúÁî∞Ê∞¥Âà©Âª∫ËÆæÔºåÊ≤πËèúË∂äÂÜ¨ÁÆ°ÁêÜÔºåÊûúÊ†ëÂüπÂúü' },
            { name: 'Â∞èÈõ™', season: 'ÂÜ¨', date: '11Êúà22-23Êó•', desc: 'ÂÜ¨Â∞èÈ∫¶ÂÜ¨ÁÅåÔºåËî¨ËèúÂÇ®ËóèÔºåÊûúÂõ≠Ê∏ÖÂõ≠Ê∂àÊØí' },
            { name: 'Â§ßÈõ™', season: 'ÂÜ¨', date: '12Êúà6-8Êó•', desc: 'ÂÜúÁî∞‰ºëËÄïÂÖªÂú∞ÔºåÊ∏©ÂÆ§Â§ßÊ£öÊ∏©Â∫¶Ë∞ÉÊéß' },
            { name: 'ÂÜ¨Ëá≥', season: 'ÂÜ¨', date: '12Êúà21-23Êó•', desc: 'ÁßØËÇ•ÈÄ†ËÇ•ÔºåÊûúÊ†ëÈò≤ÂÜªÔºåÂÜ¨Â≠£‰øÆÂâ™' },
            { name: 'Â∞èÂØí', season: 'ÂÜ¨', date: '1Êúà5-7Êó•', desc: 'Ë∂äÂÜ¨‰ΩúÁâ©Èò≤ÂÜªÂÆ≥ÔºåÊ∏©ÂÆ§‰ΩúÁâ©ÂÖâÁÖßÁÆ°ÁêÜ' },
            { name: 'Â§ßÂØí', season: 'ÂÜ¨', date: '1Êúà20-21Êó•', desc: 'ÂÜú‰∏öÊú∫Ê¢∞‰øùÂÖªÔºåÊò•ËÄïÁâ©ËµÑÂáÜÂ§áÔºåÂúüÂ£§ÊîπËâØ' }
        ];

        // ÂàùÂßãÂåñÂõæË°®
        const chart = echarts.init(document.getElementById('chart-container'));
        let activeTerm = null;
        let isAnimating = false;
        let hoverTimer = null;

        const slider = document.getElementById('time-slider');
        const tooltip = document.getElementById('term-tooltip');

        // ÂàõÂª∫Êó∂Èó¥ËΩ¥Ê†áÁ≠æ
        const monthLabels = [
              { day: 15, name: '12Êúà' },{ day: 45, name: '11Êúà' },{ day: 75, name: '10Êúà' },{ day: 105, name: '9Êúà' },{ day: 135, name: '8Êúà' },{ day: 165, name: '7Êúà' },{ day: 195, name: '6Êúà' },{ day: 225, name: '5Êúà' },{ day: 255, name: '4Êúà' },{ day: 285, name: '3Êúà' },{ day: 315, name: '2Êúà' },{ day: 345, name: '1Êúà' }
        ];

        const labelsContainer = document.getElementById('time-labels');
        monthLabels.forEach(label => {
            const elem = document.createElement('div');
            elem.className = 'time-label';
            elem.style.top = `${(label.day / 365) * 100}%`;
            elem.textContent = label.name;
            labelsContainer.appendChild(elem);
        });

        // ‰ºòÂåñÊó∂Èó¥ËΩ¥‰∫§‰∫í
        slider.addEventListener('input', _.throttle(e => {
            if (isAnimating) return;
            isAnimating = true;

            const day = parseInt(e.target.value);
            const term = findNearestTerm(day);

            anime({
                targets: slider,
                value: getTermDay(term.date),
                duration: 400,
                easing: 'easeOutQuad',
                round: true
            });

            updateHighlight(term);
            showTooltip(term, day);

            setTimeout(() => isAnimating = false, 150);
        }, 20));

        // Èº†Ê†áÊÇ¨ÂÅú‰∫§‰∫í
        chart.on('mouseover', ({ name }) => {
            const term = solarTermsData.find(t => t.name === name);
            clearTimeout(hoverTimer);
            showTooltip(term, getTermDay(term.date));
        });

        chart.on('mouseout', () => {
            hoverTimer = setTimeout(() => {
                anime({
                    targets: tooltip,
                    opacity: 0,
                    scale: 0.9,
                    duration: 200
                });
            }, 200);
        });

        // ÁÇπÂáªË∑≥ËΩ¨ÂäüËÉΩ
        chart.on('click', ({ name }) => {
            const term = solarTermsData.find(t => t.name === name);
            window.location.href = `./ËäÇÊ∞îÁïåÈù¢/Á´ãÂÜ¨.html`;
        });

        // Ê†∏ÂøÉÂäüËÉΩÂáΩÊï∞
        function updateHighlight(term) {
            chart.dispatchAction({
                type: 'highlight',
                name: term.name,
                animation: { duration: 300, easing: 'quadraticOut' }
            });
            if (activeTerm) {
                chart.dispatchAction({ type: 'downplay', name: activeTerm });
            }
            activeTerm = term.name;
        }

        function showTooltip(term, day) {
            clearTimeout(hoverTimer);
            const angle = (day / 365) * 360 - 90;
            const x = Math.cos(angle * Math.PI / 180) * 200 + window.innerWidth / 2;
            const y = Math.sin(angle * Math.PI / 180) * 200 + window.innerHeight / 2;

            anime({
                targets: tooltip,
                left: `${x}px`,
                top: `${y}px`,
                opacity: 1,
                scale: [0.95, 1],
                duration: 300,
                easing: 'easeOutBack',
                begin: () => {
                    tooltip.innerHTML = `
                        <h3 style="color:${seasonColors[term.season]}">${term.name}</h3>
                        <p>üìÖ ${term.date}</p>
                        <p>${term.desc}</p>
                    `;
                }
            });
        }

        // Â∑•ÂÖ∑ÂáΩÊï∞
        function getTermDay(dateStr) {
            const [month, days] = dateStr.split('Êúà');
            const [startDay] = days.replace('Êó•', '').split('-').map(Number);
            return (parseInt(month) - 1) * 30 + startDay;
        }

        function findNearestTerm(day) {
            return solarTermsData.reduce((nearest, term) =>
                Math.abs(getTermDay(term.date) - day) <
                    Math.abs(getTermDay(nearest.date) - day) ? term : nearest
            );
        }

        // EChartsÈÖçÁΩÆ
        const option = {
            title: {
                text: 'ÂªøÂõõËäÇÊ∞îÊó∂Èó¥ÂàÜÂ∏É',
                subtext: 'ÊªëÂä®Âè≥‰æßÊó∂Èó¥ËΩ¥Êé¢Á¥¢ËäÇÊ∞î',
                left: 'center',
                textStyle: {
                    color: '#2c7a53',
                    fontSize: 24,
                    fontWeight: 'bold'
                }
            },
            series: [{
                type: 'pie',
                radius: ['20%', '75%'],
                roseType: 'radius',
                itemStyle: {
                    color: ({ data }) => seasonColors[data.season],
                    borderWidth: 2,
                    borderColor: '#fff',
                    shadowBlur: 10,
                    shadowColor: 'rgba(0, 0, 0, 0.1)'
                },
                label: {
                    show: true,
                    formatter: '{b}',
                    fontSize: 14,
                    fontWeight: 'bold',
                    color: '#333'
                },
                emphasis: {
                    scale: true,
                    scaleSize: 15,
                    itemStyle: {
                        shadowBlur: 20,
                        shadowColor: 'rgba(0, 0, 0, 0.2)'
                    },
                    label: {
                        fontSize: 16,
                        color: '#2c7a53'
                    }
                },
                data: solarTermsData.map(term => ({
                    name: term.name,
                    value: 15,
                    season: term.season
                })),
                animationType: 'scale',
                animationEasing: 'elasticOut',
                animationDuration: 600
            }]
        };

        chart.setOption(option);
        window.addEventListener('resize', () => chart.resize());
    </script>
</body>

</html>